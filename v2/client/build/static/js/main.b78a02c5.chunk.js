(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{164:function(e,t,n){},203:function(e,t,n){e.exports=n(246)},215:function(e,t,n){},216:function(e,t,n){},217:function(e,t,n){},218:function(e,t,n){},246:function(e,t,n){"use strict";n.r(t);var a=n(12),r=n(0),o=n.n(r),l=n(17),i=n.n(l),c=n(9),s=n(44),u=n(170),m=n(15),d="/",p="/dashboard/:section?",g=e=>"/dashboard/".concat(e),v="/venue/:venueSlug",b=e=>"/venue/".concat(e),f=(e,t,n)=>Object.values(t).includes(e)?e:n;const y=e=>e.pathname===d;var h=n(184);const E=(e,t)=>({container:{display:"flex",flexWrap:"wrap",flexDirection:"column",justifyContent:"center",alignItems:"center",background:"linear-gradient(rgba(0, 0, 0, 0.5),rgba(0, 0, 0, 0.5)),url(/images/".concat(e,") 50% 50% no-repeat"),backgroundSize:"cover",height:t},headerText:{color:"#ffffff"}}),O=E("family-biking-cmp.jpg","700px");var j=()=>o.a.createElement("div",{style:O.container},o.a.createElement(h.a,{variant:"h2",style:O.headerText},o.a.createElement("strong",null,"Experience")," childhood, again.")),S=(n(215),e=>{const t=e.title,n=e.icon,a=e.text,r={background:"url(/images/icons/".concat(n,".png) 0% 0% / 60px 60px no-repeat"),width:"60px",height:"60px"};return o.a.createElement("div",{className:"value-prop-section"},o.a.createElement("div",{className:"value-prop-title"},t),o.a.createElement("div",{className:"value-prop-icon",style:r}),o.a.createElement("div",{className:"value-prop-text"},a))});n(216);const x={title:"Discover",icon:"discover",text:"Find out about great local places to visit with your family. From restaurants, to museums, \n\tparks and playgrounds, make the most of your time!"},I={title:"Track",icon:"track",text:"Had a great time sharing a meal with your family or enjoyed a hiking trail? Jot it down to build your \n\troster of go-to places for your future trips."},C={title:"Share",icon:"share",text:"Share your favorite places to visit with friends and family; hear about what others are \n\tenjoying, for great new ideas."};var N=()=>o.a.createElement("div",{className:"value-prop-container"},o.a.createElement(S,x),o.a.createElement(S,I),o.a.createElement(S,C));var T=n(174),k=n(183),w=n(23);function D(){const e=Object(w.a)(["\n  query {\n    userFeedConfig {\n      cityIds\n      venueTypeIds\n      cityDetails {\n        id\n        name\n        state\n      }\n    }\n  }\n"]);return D=function(){return e},e}function q(){const e=Object(w.a)(["\n  query {\n    currentUser @client {\n      id\n      firstName\n      lastName\n    }\n  }\n"]);return q=function(){return e},e}const $=Object(c.gql)(q()),V=Object(c.gql)(D()),F=()=>!!localStorage.getItem("auth-token");n(217),n(218);var B=()=>o.a.createElement("div",null,!F()&&o.a.createElement("div",null,o.a.createElement("button",{className:"form-button homepage-signup-button",onClick:()=>(()=>{const e=new Event("openSignUpModal");window.dispatchEvent(e)})()},"Get Started"))),M=()=>o.a.createElement("div",null,o.a.createElement(j,null),o.a.createElement(N,null),o.a.createElement(B,null)),A=n(11),U=n(8),W=n(36),L=n(283),z=n(294),Q=n(300),R=n(281),H=n(280),_=n(282),G=n(302),P=n(112),J=n(277),Y=n(278),K=n(177),Z=n.n(K),X=n(279),ee=n(115);function te(){const e=Object(w.a)(["\n  query($limit: Int, $query: String) {\n    cities(first: $limit, query: $query) {\n      id\n      name\n      state\n    }\n  }\n"]);return te=function(){return e},e}const ne=Object(c.gql)(te());var ae=n(303),re=n(274);const oe={container:{position:"relative",width:"500px"},formControl:{minWidth:"500px",marginTop:"16px",marginBottom:"8px",height:"16px"}};var le=({onCitySelected:e,isMulti:t,fieldLabel:n,placeholder:l,containerWidth:i,containerDisplay:s,initialValue:u})=>{const m=Object(c.useApolloClient)(),d=Object(r.useState)(""),p=Object(A.a)(d,2),g=p[0],v=p[1],b=Object(r.useState)(t?[]:{}),f=Object(A.a)(b,2),y=f[0],h=f[1],E=Object(r.useState)([]),O=Object(A.a)(E,2),j=O[0],S=O[1];Object(r.useEffect)(()=>{g&&g.length>=3?(e=>m.query({query:ne,variables:{limit:10,query:e}}))(g).then(({data:e})=>{S(e.cities.map(e=>({value:e.id,label:"".concat(e.name,", ").concat(e.state)})))}):S([])},[g,m]),Object(r.useEffect)(()=>{u&&Array.isArray(u)&&u.length&&h(u.map(e=>({value:e.id,label:"".concat(e.name,", ").concat(e.state)})))},[u]);return o.a.createElement("div",{style:Object(a.a)(Object(a.a)({},oe.container),{},{width:i||"500px",display:s||"block"})},o.a.createElement(re.a,{style:oe.formControl},o.a.createElement(ae.a,{shrink:!0,htmlFor:"age-simple"},n||"City")),o.a.createElement(ee.a,{value:y,defaultValue:null,onChange:t=>{h(t),e(t)},options:j,onInputChange:e=>{v(e)},placeholder:l||"Type in name of city",isClearable:!0,isMulti:!!t,menuIsOpen:j&&j.length,escapeClearsValue:!0}))},ie=n(298),ce=n(301);function se(){const e=Object(w.a)(["\n  query($cityIds: String, $venueTypeIds: String, $sort: String, $first: Int) {\n    venues(\n      cityIds: $cityIds\n      venueTypeIds: $venueTypeIds\n      sort: $sort\n      first: $first\n    ) {\n      id\n      createdAt\n      name\n      slug\n      description\n      streetAddress\n      zipcode\n      city\n      state\n      lat\n      lng\n      creator {\n        id\n        firstName\n        lastName\n      }\n      venueTypes {\n        id\n        name\n        image\n      }\n    }\n  }\n"]);return se=function(){return e},e}function ue(){const e=Object(w.a)(["\n  query($venueId: ID!, $limit: Int, $radius: Int) {\n    similarVenues(id: $venueId, first: $limit, radius: $radius) {\n      id\n      name\n      slug\n      streetAddress\n      zipcode\n      city\n    }\n  }\n"]);return ue=function(){return e},e}function me(){const e=Object(w.a)(["\n  query {\n    venueTypes {\n      id\n      name\n      image\n    }\n  }\n"]);return me=function(){return e},e}function de(){const e=Object(w.a)(["\n  query {\n    me {\n      venues {\n        ...VenueDetails\n      }\n      favoriteVenues {\n        ...VenueDetails\n      }\n    }\n  }\n  ","\n"]);return de=function(){return e},e}function pe(){const e=Object(w.a)(["\n  query($venueSlug: String!) {\n    venueBySlug(slug: $venueSlug) {\n      ...VenueDetails\n      ...VenueStats\n    }\n  }\n  ","\n  ","\n"]);return pe=function(){return e},e}function ge(){const e=Object(w.a)(["\n  query($venueId: ID!) {\n    venue(id: $venueId) {\n      ...VenueDetails\n      ...VenueStats\n    }\n  }\n  ","\n  ","\n"]);return ge=function(){return e},e}function ve(){const e=Object(w.a)(["\n  query($venueId: ID!) {\n    venue(id: $venueId) {\n      ...VenueDetails\n    }\n  }\n  ","\n"]);return ve=function(){return e},e}function be(){const e=Object(w.a)(["\n  fragment VenueStats on Venue {\n    venueStats {\n      favorites\n      favoriteByCurrentUser\n    }\n  }\n"]);return be=function(){return e},e}function fe(){const e=Object(w.a)(["\n  fragment VenueDetails on Venue {\n    id\n    name\n    slug\n    description\n    streetAddress\n    zipcode\n    city\n    state\n    lat\n    lng\n    venueTypes {\n      id\n      name\n      image\n    }\n  }\n"]);return fe=function(){return e},e}const ye=Object(c.gql)(fe()),he=Object(c.gql)(be()),Ee=(Object(c.gql)(ve(),ye),Object(c.gql)(ge(),ye,he),Object(c.gql)(pe(),ye,he)),Oe=Object(c.gql)(de(),ye),je=Object(c.gql)(me()),Se=Object(c.gql)(ue()),xe=Object(c.gql)(se()),Ie={formControl:{minWidth:"500px",marginTop:"16px",marginBottom:"8px"}};var Ce=({onVenueTypeSelected:e})=>{const t=Object(r.useState)(""),n=Object(A.a)(t,2),a=n[0],l=n[1],i=Object(c.useQuery)(je),s=i.loading,u=i.error,m=i.data;return s?"Loading...":u?"Error! ".concat(u.message):o.a.createElement(re.a,{style:Ie.formControl},o.a.createElement(ae.a,{htmlFor:"age-simple"},"Venue Type"),o.a.createElement(ie.a,{value:a,onChange:t=>{return n=t.target.value,l(n),void e(n);var n},inputProps:{name:"type",id:"venue-type"}},m.venueTypes.map(e=>o.a.createElement(ce.a,{key:e.id,value:e.id},e.name))))};function Ne(){const e=Object(w.a)(["\n  mutation DeleteUserVenueFavorite($venueId: Int!) {\n    deleteUserVenueFavorite(venueId: $venueId) {\n      favorites\n      favoriteByCurrentUser\n    }\n  }\n"]);return Ne=function(){return e},e}function Te(){const e=Object(w.a)(["\n  mutation CreateUserVenueFavorite($venueId: Int!) {\n    createUserVenueFavorite(venueId: $venueId) {\n      favorites\n      favoriteByCurrentUser\n    }\n  }\n"]);return Te=function(){return e},e}function ke(){const e=Object(w.a)(["\n  mutation CreateVenueMutation(\n    $name: String!\n    $streetAddress: String!\n    $zipcode: Int!\n    $cityId: Int!\n    $typeId: Int!\n  ) {\n    createVenue(\n      name: $name\n      streetAddress: $streetAddress\n      zipcode: $zipcode\n      city: { id: $cityId }\n      venueType: { id: $typeId }\n    ) {\n      id\n      name\n      streetAddress\n      venueTypes {\n        name\n      }\n    }\n  }\n"]);return ke=function(){return e},e}const we=Object(c.gql)(ke()),De=Object(c.gql)(Te()),qe=Object(c.gql)(Ne()),$e={appBar:{position:"relative"},title:{margin:"0 auto"},body:{margin:"0 auto"},input:{minWidth:"500px"}},Ve={name:"",type:{id:null},streetAddress:"",zipcode:"",lat:"",lng:"",city:{}};var Fe=({open:e,toggleDialog:t,onCreatedVenue:n})=>{const l=Object(c.useMutation)(we,{onError(e){console.log("error",e)},onCompleted(e){n()},refetchQueries:[{query:Oe}],awaitRefetchQueries:!0}),i=Object(A.a)(l,1)[0],s=Object(r.useState)(Object(a.a)({},Ve)),u=Object(A.a)(s,2),m=u[0],d=u[1],p=Object(r.useState)("Please enter information about a venue"),g=Object(A.a)(p,2),v=g[0],b=g[1],f=e=>t=>{d(Object(a.a)(Object(a.a)({},m),{},{[e]:t.target.value}))};return o.a.createElement(Q.a,{open:e,onClose:t,fullScreen:!0,"aria-labelledby":"form-dialog-title"},o.a.createElement(J.a,{style:$e.appBar},o.a.createElement(Y.a,null,o.a.createElement(X.a,{edge:"start",color:"inherit",onClick:t,"aria-label":"close"},o.a.createElement(Z.a,null)))),o.a.createElement(H.a,{style:$e.title},"Add New Destination"),o.a.createElement(R.a,{style:$e.body},o.a.createElement(_.a,null,v),o.a.createElement(G.a,{id:"venue-name",label:"Venue name",value:m.name,onChange:f("name"),margin:"normal",style:$e.input}),o.a.createElement("br",null),o.a.createElement(Ce,{onVenueTypeSelected:e=>{d(Object(a.a)(Object(a.a)({},m),{},{type:{id:e}}))}}),o.a.createElement("br",null),o.a.createElement(G.a,{id:"venue-street-address",name:"street-address",label:"Street address",value:m.streetAddress,onChange:f("streetAddress"),margin:"normal",autoComplete:"shipping street-address",style:$e.input}),o.a.createElement(le,{onCitySelected:e=>{e&&e.value?d(Object(a.a)(Object(a.a)({},m),{},{city:{id:e.value}})):d(Object(a.a)(Object(a.a)({},m),{},{city:{}}))}}),o.a.createElement(P.a,{customInput:G.a,id:"venue-zipcode",name:"zipcode",label:"Zipcode",value:m.zipcode,onChange:f("zipcode"),margin:"normal",style:$e.input,autoComplete:"postal-code",format:"#####"}),o.a.createElement("div",null,o.a.createElement(L.a,{color:"primary",onClick:()=>{(({name:e,type:t,streetAddress:n,city:a,zipcode:r})=>{let o={name:!1,type:!1,streetAddress:!1,city:!1,zipcode:!1};return e&&e.length>=2&&(o.name=!0),t&&t.id&&(o.type=!0),n&&n.length>=2&&(o.streetAddress=!0),a&&a.id&&(o.city=!0),r&&!isNaN(parseInt(r))&&(o.zipcode=!0),-1===Object.values(o).indexOf(!1)})(m)?i({variables:{name:m.name,typeId:m.type.id,streetAddress:m.streetAddress,zipcode:parseInt(m.zipcode),cityId:m.city.id}}).then(e=>{d(Object(a.a)({},Ve)),t()}):b("Please enter valid venue information")}},"Create venue"))))},Be=n(178),Me=n.n(Be),Ae=n(297),Ue=n(285);var We=Object(U.a)({appBar:{boxShadow:"none",float:"left",width:"300px"},tabIndicator:{backgroundColor:"#ffffff"}})(({classes:e,venues:t,venueTypeFilter:n,onSetVenueTypeFilter:a})=>o.a.createElement(o.a.Fragment,null,o.a.createElement(Me.a,{position:"static",className:e.appBar},o.a.createElement(Ae.a,{value:n,onChange:(e,t)=>{a(t)},classes:{indicator:e.tabIndicator},orientation:"vertical",variant:"scrollable",scrollButtons:"auto"},o.a.createElement(Ue.a,{label:"all",value:"all"}),(e=>{let t={};for(let n=0;n<e.length;n++)e[n].venueTypes&&e[n].venueTypes.length&&(t[e[n].venueTypes[0].name]?t[e[n].venueTypes[0].name].venues.push(e[n]):t[e[n].venueTypes[0].name]={type:{id:e[n].venueTypes[0].id,name:e[n].venueTypes[0].name},venues:[e[n]]});return Object.keys(t)})(t).sort().map((e,t)=>o.a.createElement(Ue.a,{label:e,value:e,key:t})))))),Le=n(286),ze=n(287),Qe=n(288),Re=n(289),He=n(290),_e=n(291),Ge=n(292),Pe=n(293);const Je=e=>{const t="".concat(e.streetAddress,", ").concat(e.city,", ").concat(e.state," ").concat(e.zipcode);return"https://maps.google.com/?q=".concat(encodeURIComponent(t))},Ye=e=>"".concat(e.city,", ").concat(e.state);var Ke=Object(U.a)({"@global":{".venueItem":{border:"1px solid #eee",borderRadius:"8px",marginTop:"5px",marginBottom:"5px",padding:"15px",width:"49%",display:"inline-block","&:nth-child(odd)":{marginRight:"10px"}},".venueItemTitle":{display:"block",fontSize:"18px",fontWeight:500,lineHeight:1.6,color:"#333333",textDecoration:"none","&:hover":{textDecoration:"underline"}},".venueItemDescription":{},".venueItemTypeBadge":{display:"inline-block",padding:"1px 5px",backgroundColor:"#2196f3",color:"#fff",borderRadius:"3px",height:"22px"},".venueItemTypeBadgeText":{marginLeft:"20px",marginTop:"3px",textTransform:"uppercase",fontSize:"11px",fontWeight:600,minWidth:"75px",textAlign:"center"},".venueItemLocation":{textTransform:"uppercase",fontSize:"11px",fontWeight:600,textDecoration:"none",float:"right",marginTop:"4px",color:"#666"},".venueIcon":{float:"left",width:"15px",height:"auto",marginRight:"5px",position:"relative",top:"2px"},".venueUnlike":{float:"right"}}})(e=>{const t=e.venue,n=e.showDeleteFavoriteButton,a=e.onDeleteFavoriteCallback,r=Object(c.useMutation)(qe,{onError(e){console.log("error",e)},update:(e,{data:{deleteUserVenueFavorite:t}})=>{i(e,t)},onCompleted:()=>{a()},refetchQueries:[{query:Oe}],awaitRefetchQueries:!0}),l=Object(A.a)(r,1)[0],i=(e,n)=>{try{let a=e.readQuery({query:Ee,variables:{venueSlug:t.slug}});a.venueBySlug.venueStats=n,e.writeQuery({query:Ee,variables:{venueSlug:t.slug},data:a})}catch(a){}};return o.a.createElement("div",{className:"venueItem"},n&&o.a.createElement("button",{onClick:()=>{l({variables:{venueId:t.id}})},className:"venueUnlike"},"Unlike"),o.a.createElement(W.b,{to:b(t.slug),className:"venueItemTitle"},t.name),o.a.createElement("div",{className:"venueItemDescription"},o.a.createElement("div",{className:"venueItemTypeBadge"},((e,t)=>{let n;switch(e.venueTypes[0].name){case"restaurant":n=o.a.createElement(Le.a,{className:t});break;case"museum":n=o.a.createElement(ze.a,{className:t});break;case"zoo":n=o.a.createElement(Qe.a,{className:t});break;case"hiking trail":n=o.a.createElement(Re.a,{className:t});break;case"outdoor park":n=o.a.createElement(He.a,{className:t});break;case"camp site":n=o.a.createElement(_e.a,{className:t});break;case"outdoor playground":n=o.a.createElement(Ge.a,{className:t});break;default:n=o.a.createElement(Pe.a,{className:t})}return n})(t,"venueIcon"),o.a.createElement("div",{className:"venueItemTypeBadgeText"},t.venueTypes&&t.venueTypes.length?"".concat(t.venueTypes[0].name):"")),o.a.createElement("a",{href:Je(t),target:"_blank",rel:"noopener noreferrer",className:"venueItemLocation"},Ye(t))))});var Ze=Object(U.a)({"@global":{".venueList":{marginLeft:"320px"}}})(({currentDashboardSection:e,isFavoritesDashboardSection:t,externalTriggerVenueRefresh:n})=>{const a=Object(c.useApolloClient)(),l=Object(r.useState)("all"),i=Object(A.a)(l,2),s=i[0],u=i[1],m=Object(r.useState)([]),d=Object(A.a)(m,2),p=d[0],g=d[1],v=Object(r.useState)(!0),b=Object(A.a)(v,2),f=b[0],y=b[1];Object(r.useEffect)(()=>{a.query({query:Oe}).then(({data:e})=>{g(t?e.me.favoriteVenues:e.me.venues)}),u("all")},[e,f,n,t,a]);const h=()=>{y(!f)};return o.a.createElement(r.Fragment,null,o.a.createElement(We,{venues:p,onSetVenueTypeFilter:u,venueTypeFilter:s}),o.a.createElement("div",{className:"venueList"},p.filter(e=>"all"===s||e.venueTypes[0].name===s).map(e=>o.a.createElement(Ke,{key:e.id,venue:e,showDeleteFavoriteButton:t,onDeleteFavoriteCallback:h}))))});function Xe(){const e=Object(w.a)(["\n  mutation UpdateCurrentUserFeedConfigMutation(\n    $cityIds: String\n    $venueTypeIds: String\n  ) {\n    updateUserFeedConfig(cityIds: $cityIds, venueTypeIds: $venueTypeIds) {\n      cityIds\n      venueTypeIds\n    }\n  }\n"]);return Xe=function(){return e},e}function et(){const e=Object(w.a)(["\n  mutation LoginMutation($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        id\n        firstName\n        lastName\n        email\n      }\n    }\n  }\n"]);return et=function(){return e},e}function tt(){const e=Object(w.a)(["\n  mutation SignupMutation(\n    $email: String!\n    $password: String!\n    $firstName: String!\n    $lastName: String!\n  ) {\n    signup(\n      email: $email\n      password: $password\n      firstName: $firstName\n      lastName: $lastName\n    ) {\n      token\n      user {\n        id\n        firstName\n        lastName\n        email\n      }\n    }\n  }\n"]);return tt=function(){return e},e}const nt=Object(c.gql)(tt()),at=Object(c.gql)(et()),rt=Object(c.gql)(Xe());var ot=Object(U.a)({"@global":{".feedItem":{borderBottom:"1px solid #eee",marginTop:"5px",marginBottom:"5px",padding:"15px"},".feedItemTitle":{fontWeight:600,color:"#000",textDecoration:"none",fontSize:"15px"},".feedItemSubtitle":{fontSize:"12px"}}})(({venue:e})=>{return o.a.createElement("div",{className:"feedItem"},o.a.createElement(W.b,{to:b(e.slug),className:"feedItemTitle"},e.name),o.a.createElement("div",{className:"feedItemSubtitle"},"in ",Ye(e),o.a.createElement("br",null),"added ",(e=>{const t=new Date(e),n=((new Date).getTime()-t.getTime())/1e3;let a;return a=n<=60?"now":n<90?Math.round(n/60)+" minute ago":n<=3600?Math.round(n/60)+" minutes ago":n<5400?Math.round(n/3600)+" hour ago":n<=86400?Math.round(n/3600)+" hours ago":"on "+t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),a})(e.createdAt)," by ",(t=e.creator)&&t.firstName&&t.lastName?"".concat(t.firstName," ").concat(t.lastName[0],"."):""));var t});const lt={container:{position:"relative",width:"350px",display:"inline-block"},formControl:{minWidth:"500px",marginTop:"16px",marginBottom:"8px",height:"16px"}};var it=({initialValue:e,onVenueTypeSelected:t})=>{const n=Object(c.useApolloClient)(),a=Object(r.useState)([]),l=Object(A.a)(a,2),i=l[0],s=l[1],u=Object(r.useState)([]),m=Object(A.a)(u,2),d=m[0],p=m[1];Object(r.useEffect)(()=>{n.query({query:je}).then(({data:e})=>{p(e.venueTypes.map(e=>({value:e.id,label:e.name})))})},[n]),Object(r.useEffect)(()=>{if(d&&d.length&&e){const t=e.split(",").map(e=>parseInt(e));s(d.filter(e=>t.includes(e.value)))}},[d,e]);return o.a.createElement("div",{style:lt.container},o.a.createElement(re.a,{style:lt.formControl},o.a.createElement(ae.a,{shrink:!0,htmlFor:"age-simple"},"Venue type")),o.a.createElement(ee.a,{value:i,defaultValue:null,onChange:e=>{s(e),t(e)},options:d,placeholder:"Select venue type",isClearable:!0,isMulti:!0,isSearchable:!1,escapeClearsValue:!0}))};var ct=({feedConfiguration:e,onFeedConfigurationUpdated:t})=>{const n=Object(r.useState)(),a=Object(A.a)(n,2),l=a[0],i=a[1],c=Object(r.useState)(),s=Object(A.a)(c,2),u=s[0],m=s[1];Object(r.useEffect)(()=>{i(e.cityIds),m(e.venueTypeIds)},[e]);return o.a.createElement("div",null,o.a.createElement(le,{onCitySelected:e=>{const n=e?e.map(e=>e.value).join(","):null;i(n),t({cityIds:n,venueTypeIds:u})},fieldLabel:"Filter feed by city",placeholder:"e.g.: San Francisco, CA",isMulti:!0,containerWidth:"350px",containerDisplay:"inline-block",initialValue:e.cityDetails}),o.a.createElement("div",{style:{display:"inline-block",width:"30px",height:"20px"}}),o.a.createElement(it,{initialValue:u,onVenueTypeSelected:e=>{const n=e?e.map(e=>e.value).join(","):null;m(n),t({venueTypeIds:n,cityIds:l})}}))};var st=Object(U.a)({"@global":{".feedContainer":{maxWidth:"50%",minWidth:"400px"}}})(()=>{const e=Object(c.useApolloClient)(),t=Object(r.useState)([]),n=Object(A.a)(t,2),l=n[0],i=n[1],s=Object(r.useState)({cityIds:null,venueTypeIds:null,sort:"DESC",first:25,init:!1}),u=Object(A.a)(s,2),m=u[0],d=u[1],p=Object(c.useMutation)(rt),g=Object(A.a)(p,1)[0];Object(r.useEffect)(()=>{e.query({query:V}).then(({data:e})=>{d(Object(a.a)({init:!0,sort:"DESC",first:25},e.userFeedConfig))})},[e]),Object(r.useEffect)(()=>{m.init&&e.query({query:xe,variables:Object(a.a)({},m)}).then(({data:e})=>{i(e.venues)})},[e,m]);return o.a.createElement("div",null,o.a.createElement(ct,{feedConfiguration:m,onFeedConfigurationUpdated:e=>{e&&d(Object(a.a)({},e)),g({variables:{cityIds:e.cityIds,venueTypeIds:e.venueTypeIds}})}}),o.a.createElement("div",{className:"feedContainer"},l.map(e=>o.a.createElement(ot,{key:e.id,venue:e}))))});const ut={FEED:"feed",FOLLOWED_DESTINATIONS:"followed-destinations",MY_DESTINATIONS:"my-destinations",FAVORITES:"favorites"};var mt=Object(U.a)({"@global":{".sectionHeader":{marginBottom:"30px",display:"flex"},".sectionHeaderTitle":{flexGrow:2,maxWidth:"250px",cursor:"pointer",textDecoration:"none",color:"#666",textAlign:"center",textTransform:"uppercase",borderRadius:"8px",margin:"0px 10px",fontSize:"14px",fontWeight:600,lineHeight:2.5,letterSpacing:"1.3px",border:"1px solid #eee"},".sectionHeaderTitleSelected":{backgroundColor:"#f9f8f8"},".venueList":{marginLeft:"320px"}}})(({match:e})=>{const t=f(e.params.section,ut,ut.FEED),n=Object(r.useState)(!1),a=Object(A.a)(n,2),l=a[0],i=a[1],c=Object(r.useState)(!0),s=Object(A.a)(c,2),u=s[0],m=s[1],d=()=>{i(!l)},p=(e,n)=>o.a.createElement(W.b,{to:g(n),className:"sectionHeaderTitle ".concat(t===n?"sectionHeaderTitleSelected":"")},e);return o.a.createElement("div",{className:"mainContainer"},o.a.createElement("div",{className:"mainContent"},o.a.createElement("div",{className:"sectionHeader"},p("Feed",ut.FEED),p("My destinations",ut.MY_DESTINATIONS),p("Favorite destinations",ut.FAVORITES),o.a.createElement(L.a,{variant:"outlined",style:{marginLeft:"auto"},onClick:d},o.a.createElement(z.a,null),"Add Destination"),o.a.createElement(Fe,{open:l,toggleDialog:d,onCreatedVenue:()=>m(!u)})),t===ut.FEED?o.a.createElement(st,null):o.a.createElement(Ze,{currentDashboardSection:t,isFavoritesDashboardSection:t===ut.FAVORITES,externalTriggerVenueRefresh:u})))}),dt=n(179),pt=n.n(dt),gt=e=>{const t=e.venue,n=E((e=>e.venueTypes[0].image||"restaurant-header-cmp.jpg")(t),"300px");return o.a.createElement("div",{style:n.container},o.a.createElement(h.a,{variant:"h2",style:n.headerText},o.a.createElement("strong",null,t.name)))};n(164);var vt=({venue:e})=>{const t=Object(c.useApolloClient)(),n=Object(r.useState)([]),a=Object(A.a)(n,2),l=a[0],i=a[1];return Object(r.useEffect)(()=>{t.query({query:Se,variables:{venueId:e.id,limit:5,radius:10}}).then(({data:e})=>{i(e.similarVenues)})},[e,t]),o.a.createElement("div",{className:"sidebar-module"},o.a.createElement("h3",null,"Similar places near by"),o.a.createElement("div",{className:"sidebar-module-body"},l&&l.map(e=>o.a.createElement("div",{key:e.id},o.a.createElement(W.b,{to:b(e.slug)},e.name)))))};var bt=({venue:e})=>o.a.createElement("div",{className:"sidebar-module"},o.a.createElement("h3",null,"Location"),o.a.createElement("div",{className:"sidebar-module-body"},((e,t=", ")=>e?o.a.createElement("span",null,e.streetAddress,t,Ye(e)," ",e.zipcode):"")(e,o.a.createElement("br",null)))),ft=({venueId:e,venueSlug:t,favoriteByCurrentUser:n,onUpdateFavoritesStats:r})=>{const l=[{query:Oe}],i=(e,n)=>{let o=e.readQuery({query:Ee,variables:{venueSlug:t}});r(n),e.writeQuery({query:Ee,variables:{venueSlug:t},data:Object(a.a)(Object(a.a)({},o),{},{venueBySlug:Object(a.a)(Object(a.a)({},o.venueBySlug),{},{venueStats:Object(a.a)({},n)})})})},s=Object(c.useMutation)(De,{onError(e){console.log("error",e)},update:(e,{data:{createUserVenueFavorite:t}})=>{i(e,t)},refetchQueries:l}),u=Object(A.a)(s,1)[0],m=Object(c.useMutation)(qe,{onError(e){console.log("error",e)},update:(e,{data:{deleteUserVenueFavorite:t}})=>{i(e,t)},refetchQueries:l}),d=Object(A.a)(m,1)[0];return o.a.createElement(o.a.Fragment,null,n?o.a.createElement("span",null,"\u2605\xa0",o.a.createElement("a",{href:"#",onClick:t=>{t.preventDefault(),d({variables:{venueId:e}})}},"Unlike")):o.a.createElement("a",{href:"#",onClick:t=>{t.preventDefault(),u({variables:{venueId:e}})}},"Like"))};const yt={sectionHeader:{marginBottom:"15px"},columnWrapper:{display:"flex"},mainColumn:{flexGrow:3,maxWidth:"800px"},sideColumm:{flexGrow:1,marginTop:"-20px"}};var ht=({match:e})=>{const t=e.params.venueSlug,n=Object(r.useState)(null),l=Object(A.a)(n,2),i=l[0],s=l[1],u=Object(r.useState)(""),m=Object(A.a)(u,2),d=m[0],p=m[1],g=Object(c.useQuery)(Ee,{variables:{venueSlug:t}}),v=g.loading,b=g.error,f=g.data;Object(r.useEffect)(()=>{f&&(s(f.venueBySlug),p((e=>e.venueTypes[0].name||"venue")(f.venueBySlug)))},[f]);const y=e=>{s(Object(a.a)(Object(a.a)({},i),{},{venueStats:Object(a.a)({},e)}))};return v?null:b?"Error! ".concat(b):t?i&&o.a.createElement("div",null,o.a.createElement(gt,{venue:i}),o.a.createElement("div",{className:"mainContainer"},o.a.createElement("div",{className:"mainContent"},o.a.createElement(h.a,{variant:"h5",style:yt.sectionHeader},i.name),o.a.createElement("div",{style:yt.columnWrapper},o.a.createElement("div",{style:yt.mainColumn},o.a.createElement("div",null,"Liked by"," ",o.a.createElement("strong",null,o.a.createElement(P.a,{value:i.venueStats.favorites,thousandSeparator:!0,displayType:"text"})," ",pt()("person",i.venueStats.favorites)),". \xa0",F()&&o.a.createElement(ft,{venueId:i.id,venueSlug:t,favoriteByCurrentUser:i.venueStats.favoriteByCurrentUser,onUpdateFavoritesStats:y})),o.a.createElement("br",null),i.description&&o.a.createElement("span",null,i.description),"This ",d," is located in ",i.city,", ",i.state,"."),o.a.createElement("div",{style:yt.sideColumm},o.a.createElement(bt,{venue:i}),o.a.createElement(vt,{venue:i})))))):o.a.createElement("div",null,"Venue not found.")},Et=n(296),Ot=n(284),jt=n(181),St=n(128),xt=n.n(St),It=Object(jt.a)({palette:{primary:{main:xt.a[500]},background:{default:"#efefef"}},typography:{useNextVariants:!0}}),Ct=n(80),Nt=n.n(Ct),Tt=n(180),kt=n.n(Tt),wt=n(182),Dt=n(67),qt=n.n(Dt),$t=n(116),Vt=n(56),Ft=n(295);class Bt extends r.Component{constructor(...e){var t;super(...e),t=this,this.state={login:void 0===this.props.login||this.props.login,email:"",password:"",firstName:"",lastName:"",errorMessage:null},this._update=function(){var e=Object($t.a)(qt.a.mark((function e(t,n){return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.writeQuery({query:$,data:{currentUser:Object(a.a)(Object(a.a)({},n.user),{},{token:n.token})}});case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this._confirm=function(){var e=Object($t.a)(qt.a.mark((function e(n){var a,r,o;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state.error=null,a=t.state.login?n.login:n.signup,r=a.token,o=a.user,t._saveUserData(r,o),document.location=g("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._saveUserData=(e,t)=>{((e,t)=>{localStorage.setItem("auth-token",e),localStorage.setItem("user-info",JSON.stringify(t))})(e,t)},this._error=function(){var e=Object($t.a)(qt.a.mark((function e({graphQLErrors:n}){return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state.login&&n&&n[0]&&n[0].message?t.setState({errorMessage:n[0].message}):n&&n[0]&&n[0].extensions.exception.errors[0].message&&t.setState({errorMessage:n[0].extensions.exception.errors[0].message});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}componentDidUpdate(e){e.open!==this.props.open&&this.setState({errorMessage:null}),e.login!==this.props.login&&this.setState({login:this.props.login})}render(){const e=this.state,t=e.login,n=e.email,a=e.password,r=e.firstName,l=e.lastName,i=e.errorMessage,c=this.props.classes;return o.a.createElement(Q.a,{open:this.props.open,onClose:this.props.toggleDialog,maxWidth:"sm",fullWidth:!0,"aria-labelledby":"form-dialog-title"},o.a.createElement(H.a,{id:"login-dialog-title"},t?"Login":"Sign Up"),o.a.createElement(R.a,null,i&&o.a.createElement(_.a,{className:c.dialogMainError},i),o.a.createElement("div",{className:c.dialogMainContent},!t&&o.a.createElement("span",null,o.a.createElement(G.a,{id:"firstName",label:"First name",error:!!i,value:r,onChange:e=>this.setState({firstName:e.target.value}),margin:"normal",fullWidth:!0}),o.a.createElement(G.a,{id:"lastName",label:"Last name",error:!!i,value:l,onChange:e=>this.setState({lastName:e.target.value}),margin:"normal",fullWidth:!0})),o.a.createElement(G.a,{id:"email",label:"Email",error:!!i,value:n,onChange:e=>this.setState({email:e.target.value}),margin:"normal",fullWidth:!0}),o.a.createElement(G.a,{id:"password",label:"Password",error:!!i,type:"password",autoComplete:"current-password",onChange:e=>this.setState({password:e.target.value}),margin:"normal",fullWidth:!0}))),o.a.createElement(Ft.a,null,o.a.createElement(L.a,{onClick:()=>this.setState({login:!t,errorMessage:null}),color:"primary",style:{marginRight:"auto"}},t?"need to create an account?":"already have an account?"),o.a.createElement(L.a,{onClick:this.props.toggleDialog,color:"primary"},"Cancel"),o.a.createElement(Vt.Mutation,{mutation:t?at:nt,variables:{email:n,password:a,firstName:r,lastName:l},update:(e,{data:n})=>this._update(e,t?n.login:n.signup),onCompleted:e=>this._confirm(e),onError:e=>this._error(e)},e=>o.a.createElement(L.a,{color:"primary",onClick:e},t?"login":"create account"))))}}var Mt=Object(m.f)(Object(U.a)({dialogMainContent:{display:"flex",justifyContent:"center",flexDirection:"column"},dialogMainError:{textAlign:"center"}})(Bt));var At,Ut=(At=Object(m.f)(({currentUser:e,className:t})=>{const n=Object(r.useState)(!1),a=Object(A.a)(n,2),l=a[0],i=a[1],c=Object(r.useState)(!0),s=Object(A.a)(c,2),u=s[0],m=s[1];Object(r.useEffect)(()=>{var e;e=()=>{(void 0).setState({dialogOpen:!0,login:!1}),i(!0),m(!1)},window.addEventListener("openSignUpModal",()=>e())});const d=()=>{i(!l),m(!0)};return F()?o.a.createElement(h.a,{variant:"button",color:"inherit",className:t},(e=>e&&e.id?"Welcome, ".concat(e.firstName):"")(e)):o.a.createElement("span",null,o.a.createElement(L.a,{onClick:d,className:t,color:"inherit"},"Login"),o.a.createElement(Mt,{open:l,login:u,toggleDialog:d}))}),Object(k.a)(Object(T.graphql)($,{props:({data:{currentUser:e}})=>({currentUser:e})}))(At));class Wt extends r.Component{constructor(...e){super(...e),this.state={anchorEl:null},this.toggleMenu=e=>{this.state.anchorEl?this.setState({anchorEl:null}):this.setState({anchorEl:e.currentTarget})}}render(){const e=this.props.classes;return o.a.createElement("div",{className:e.root},o.a.createElement(J.a,{position:"fixed",style:{background:"transparent",boxShadow:"none"}},o.a.createElement(Y.a,{variant:"dense",className:e.container},o.a.createElement(h.a,{className:e.logoText,variant:"button",color:"inherit"},"KidTrip"),o.a.createElement(h.a,{variant:"h6",color:"inherit",className:e.grow}),o.a.createElement(Ut,{className:e.loginButton}),F()&&o.a.createElement("span",{className:e.menuWrapper},o.a.createElement(X.a,{onClick:this.toggleMenu,className:e.menuButton,color:"inherit","aria-label":"Menu"},o.a.createElement(kt.a,null)),o.a.createElement(wt.a,{id:"simple-menu",anchorEl:this.state.anchorEl,open:Boolean(this.state.anchorEl),onClose:this.toggleMenu},o.a.createElement(ce.a,{component:W.b,to:d,onClick:this.toggleMenu},"Home"),o.a.createElement(ce.a,{component:W.b,to:g(""),onClick:this.toggleMenu},"Dashboard"),o.a.createElement(ce.a,{onClick:this.toggleMenu},"My account"),o.a.createElement(ce.a,{onClick:()=>{localStorage.removeItem("auth-token"),localStorage.removeItem("user-info"),this.props.history.push("/")}},"Logout"))))))}}var Lt=Object(m.f)(Wt);const zt={root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},menuWrapper:{marginLeft:15}},Qt=Object(a.a)(Object(a.a)({},zt),{},{container:{borderBottom:"1px solid",borderBottomColor:Nt.a[100],backgroundColor:"white"},grow:Object(a.a)(Object(a.a)({},zt.grow),{},{color:Nt.a[500]}),menuButton:Object(a.a)(Object(a.a)({},zt.menuButton),{},{color:Nt.a[500]}),loginButton:{color:Nt.a[500]},logoText:{color:Nt.a[500]}});var Rt=Object(m.f)(e=>{const t=y(e.location)?zt:Qt,n=Object(U.a)(t)(Lt);return o.a.createElement(n,null)});class Ht extends r.Component{render(){const e=this.props,t=e.classes,n=e.location;return o.a.createElement(Ot.a,{theme:It},o.a.createElement("div",null,o.a.createElement(Et.a,null),o.a.createElement(Rt,null),!y(n)&&o.a.createElement("div",{className:t.appBarSpacer}),o.a.createElement(m.c,null,o.a.createElement(m.a,{exact:!0,path:d,component:M}),o.a.createElement(m.a,{path:p,component:mt}),o.a.createElement(m.a,{path:v,component:ht}))))}}var _t=Object(m.f)(Object(U.a)({"@global":{body:{fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:400},".mainContainer":{display:"flex",justifyContent:"center"},".mainContent":{maxWidth:"1200px",flexGrow:"1",margin:"25px",backgroundColor:"#fff",padding:"25px",borderRadius:"8px"}},appBarSpacer:{height:"49px"}})(Ht));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(245);const Gt=localStorage.getItem("auth-token"),Pt=new c.HttpLink({uri:"http://api.mykidtrip.com",credentials:"same-origin",headers:{authorization:Gt?"Bearer ".concat(Gt):""}}),Jt=new c.ApolloClient({link:c.ApolloLink.from([Object(u.a)(({graphQLErrors:e,networkError:t})=>{e&&e.map(({message:e,locations:t,path:n})=>console.log("[GraphQL error]: Message: ".concat(e,", Location: ").concat(t,", Path: ").concat(n))),t&&console.log("[Network error]: ".concat(t))}),Pt]),cache:new s.InMemoryCache,resolvers:{}});Jt.writeQuery({query:$,data:{currentUser:Object(a.a)({},(()=>{const e=localStorage.getItem("user-info");return e?JSON.parse(e):{__typename:"User",id:null,firstName:null,lastName:null,email:null}})())}}),i.a.render(o.a.createElement(W.a,null,o.a.createElement(c.ApolloProvider,{client:Jt},o.a.createElement(_t,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[203,1,2]]]);
//# sourceMappingURL=main.b78a02c5.chunk.js.map