(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{124:function(e,t,a){},203:function(e,t,a){e.exports=a(247)},215:function(e,t,a){},216:function(e,t,a){},217:function(e,t,a){},218:function(e,t,a){},245:function(e,t,a){},247:function(e,t,a){"use strict";a.r(t);var n=a(10),r=a(0),o=a.n(r),l=a(17),i=a.n(l),c=a(9),s=a(44),u=a(170),m=a(15);const d=e=>e.pathname===p.home;var p={home:"/",dashboard:"/dashboard/:section?",dashboardPath:e=>"/dashboard/".concat(e),venue:"/venue/:venueSlug",venuePath:e=>"/venue/".concat(e),userProfile:"/user/:userId",userProfilePath:e=>"/user/".concat((e=>btoa(999999999*e))(e)),validatePageSection:(e,t,a)=>Object.values(t).includes(e)?e:a},g=a(184);const v=(e,t)=>({container:{display:"flex",justifyContent:"center",alignItems:"center",background:"linear-gradient(rgba(0, 0, 0, 0.5),rgba(0, 0, 0, 0.5)),url(".concat(e,") 50% 50% no-repeat"),backgroundSize:"cover",height:t},headerText:{color:"#ffffff"}}),b=v("/images/family-biking-cmp.jpg","700px");var f=()=>o.a.createElement("div",{style:b.container},o.a.createElement(g.a,{variant:"h2",style:b.headerText},o.a.createElement("strong",null,"Experience")," childhood, again.")),h=(a(215),e=>{const t=e.title,a=e.icon,n=e.text,r={background:"url(/images/icons/".concat(a,".png) 0% 0% / 60px 60px no-repeat"),width:"60px",height:"60px"};return o.a.createElement("div",{className:"value-prop-section"},o.a.createElement("div",{className:"value-prop-title"},t),o.a.createElement("div",{className:"value-prop-icon",style:r}),o.a.createElement("div",{className:"value-prop-text"},n))});a(216);const y={title:"Discover",icon:"discover",text:"Find out about great local places to visit with your family. From restaurants, to museums, \n\tparks and playgrounds, make the most of your time!"},E={title:"Track",icon:"track",text:"Had a great time sharing a meal with your family or enjoyed a hiking trail? Jot it down to build your \n\troster of go-to places for your future trips."},O={title:"Share",icon:"share",text:"Share your favorite places to visit with friends and family; hear about what others are \n\tenjoying, for great new ideas."};var j=()=>o.a.createElement("div",{className:"value-prop-container"},o.a.createElement(h,y),o.a.createElement(h,E),o.a.createElement(h,O));var S=a(174),x=a(183),I=a(23);function C(){const e=Object(I.a)(["\n  query($cityIds: String, $venueTypeIds: String, $sort: String, $first: Int) {\n    venues(\n      cityIds: $cityIds\n      venueTypeIds: $venueTypeIds\n      sort: $sort\n      first: $first\n    ) {\n      id\n      createdAt\n      name\n      slug\n      description\n      streetAddress\n      zipcode\n      city\n      state\n      lat\n      lng\n      creator {\n        id\n        firstName\n        lastName\n      }\n      venueTypes {\n        id\n        name\n        image\n      }\n    }\n  }\n"]);return C=function(){return e},e}function N(){const e=Object(I.a)(["\n  query($venueId: ID!, $limit: Int, $radius: Int) {\n    similarVenues(id: $venueId, first: $limit, radius: $radius) {\n      id\n      name\n      slug\n      streetAddress\n      zipcode\n      city\n    }\n  }\n"]);return N=function(){return e},e}function T(){const e=Object(I.a)(["\n  query {\n    venueTypes {\n      id\n      name\n      image\n    }\n  }\n"]);return T=function(){return e},e}function k(){const e=Object(I.a)(["\n  query {\n    me {\n      venues {\n        ...VenueDetails\n      }\n      favoriteVenues {\n        ...VenueDetails\n      }\n    }\n  }\n  ","\n"]);return k=function(){return e},e}function w(){const e=Object(I.a)(["\n  query($venueSlug: String!) {\n    venueBySlug(slug: $venueSlug) {\n      ...VenueDetails\n      ...VenueStats\n    }\n  }\n  ","\n  ","\n"]);return w=function(){return e},e}function D(){const e=Object(I.a)(["\n  query($venueId: ID!) {\n    venue(id: $venueId) {\n      ...VenueDetails\n      ...VenueStats\n    }\n  }\n  ","\n  ","\n"]);return D=function(){return e},e}function V(){const e=Object(I.a)(["\n  query($venueId: ID!) {\n    venue(id: $venueId) {\n      ...VenueDetails\n    }\n  }\n  ","\n"]);return V=function(){return e},e}function q(){const e=Object(I.a)(["\n  fragment VenueStats on Venue {\n    venueStats {\n      favorites\n      favoriteByCurrentUser\n    }\n  }\n"]);return q=function(){return e},e}function $(){const e=Object(I.a)(["\n  fragment VenueDetails on Venue {\n    id\n    name\n    slug\n    description\n    streetAddress\n    zipcode\n    city\n    state\n    lat\n    lng\n    venueTypes {\n      id\n      name\n      image\n    }\n  }\n"]);return $=function(){return e},e}const F=Object(c.gql)($()),A=Object(c.gql)(q()),B=(Object(c.gql)(V(),F),Object(c.gql)(D(),F,A),Object(c.gql)(w(),F,A)),M=Object(c.gql)(k(),F),U=Object(c.gql)(T()),L=Object(c.gql)(N()),W=Object(c.gql)(C());function z(){const e=Object(I.a)(["\n  query($publicId: String!) {\n    userProfile(publicId: $publicId) {\n      user {\n        id\n        firstName\n        lastName\n        zipcode\n      }\n      config {\n        headerImageUrl\n      }\n      stats {\n        created\n        favorited\n      }\n      recentFavoriteVenues {\n        ...VenueDetails\n      }\n      recentAddedVenues {\n        ...VenueDetails\n      }\n    }\n  }\n  ","\n"]);return z=function(){return e},e}function P(){const e=Object(I.a)(["\n  query {\n    userFeedConfig {\n      cityIds\n      venueTypeIds\n      cityDetails {\n        id\n        name\n        state\n      }\n    }\n  }\n"]);return P=function(){return e},e}function R(){const e=Object(I.a)(["\n  query {\n    currentUser @client {\n      id\n      firstName\n      lastName\n    }\n  }\n"]);return R=function(){return e},e}const Q=Object(c.gql)(R()),_=Object(c.gql)(P()),H=Object(c.gql)(z(),F),G=()=>!!localStorage.getItem("auth-token");a(217),a(218);var J=()=>o.a.createElement("div",null,!G()&&o.a.createElement("div",null,o.a.createElement("button",{className:"form-button homepage-signup-button",onClick:()=>(()=>{const e=new Event("openSignUpModal");window.dispatchEvent(e)})()},"Get Started"))),Y=()=>o.a.createElement("div",null,o.a.createElement(f,null),o.a.createElement(j,null),o.a.createElement(J,null)),K=a(11),Z=a(8),X=a(35),ee=a(284),te=a(295),ae=a(301),ne=a(282),re=a(281),oe=a(283),le=a(303),ie=a(112),ce=a(278),se=a(279),ue=a(177),me=a.n(ue),de=a(280),pe=a(115);function ge(){const e=Object(I.a)(["\n  query($limit: Int, $query: String) {\n    cities(first: $limit, query: $query) {\n      id\n      name\n      state\n    }\n  }\n"]);return ge=function(){return e},e}const ve=Object(c.gql)(ge());var be=a(304),fe=a(275);const he={container:{position:"relative",width:"500px"},formControl:{minWidth:"500px",marginTop:"16px",marginBottom:"8px",height:"16px"}};var ye=({onCitySelected:e,isMulti:t,fieldLabel:a,placeholder:l,containerWidth:i,containerDisplay:s,initialValue:u})=>{const m=Object(c.useApolloClient)(),d=Object(r.useState)(""),p=Object(K.a)(d,2),g=p[0],v=p[1],b=Object(r.useState)(t?[]:{}),f=Object(K.a)(b,2),h=f[0],y=f[1],E=Object(r.useState)([]),O=Object(K.a)(E,2),j=O[0],S=O[1];Object(r.useEffect)(()=>{g&&g.length>=3?(e=>m.query({query:ve,variables:{limit:10,query:e}}))(g).then(({data:e})=>{S(e.cities.map(e=>({value:e.id,label:"".concat(e.name,", ").concat(e.state)})))}):S([])},[g,m]),Object(r.useEffect)(()=>{u&&Array.isArray(u)&&u.length&&y(u.map(e=>({value:e.id,label:"".concat(e.name,", ").concat(e.state)})))},[u]);return o.a.createElement("div",{style:Object(n.a)(Object(n.a)({},he.container),{},{width:i||"500px",display:s||"block"})},o.a.createElement(fe.a,{style:he.formControl},o.a.createElement(be.a,{shrink:!0,htmlFor:"age-simple"},a||"City")),o.a.createElement(pe.a,{value:h,defaultValue:null,onChange:t=>{y(t),e(t)},options:j,onInputChange:e=>{v(e)},placeholder:l||"Type in name of city",isClearable:!0,isMulti:!!t,menuIsOpen:j&&j.length,escapeClearsValue:!0}))},Ee=a(299),Oe=a(302);const je={formControl:{minWidth:"500px",marginTop:"16px",marginBottom:"8px"}};var Se=({onVenueTypeSelected:e})=>{const t=Object(r.useState)(""),a=Object(K.a)(t,2),n=a[0],l=a[1],i=Object(c.useQuery)(U),s=i.loading,u=i.error,m=i.data;return s?"Loading...":u?"Error! ".concat(u.message):o.a.createElement(fe.a,{style:je.formControl},o.a.createElement(be.a,{htmlFor:"age-simple"},"Venue Type"),o.a.createElement(Ee.a,{value:n,onChange:t=>{return a=t.target.value,l(a),void e(a);var a},inputProps:{name:"type",id:"venue-type"}},m.venueTypes.map(e=>o.a.createElement(Oe.a,{key:e.id,value:e.id},e.name))))};function xe(){const e=Object(I.a)(["\n  mutation DeleteUserVenueFavorite($venueId: Int!) {\n    deleteUserVenueFavorite(venueId: $venueId) {\n      favorites\n      favoriteByCurrentUser\n    }\n  }\n"]);return xe=function(){return e},e}function Ie(){const e=Object(I.a)(["\n  mutation CreateUserVenueFavorite($venueId: Int!) {\n    createUserVenueFavorite(venueId: $venueId) {\n      favorites\n      favoriteByCurrentUser\n    }\n  }\n"]);return Ie=function(){return e},e}function Ce(){const e=Object(I.a)(["\n  mutation CreateVenueMutation(\n    $name: String!\n    $streetAddress: String!\n    $zipcode: Int!\n    $cityId: Int!\n    $typeId: Int!\n  ) {\n    createVenue(\n      name: $name\n      streetAddress: $streetAddress\n      zipcode: $zipcode\n      city: { id: $cityId }\n      venueType: { id: $typeId }\n    ) {\n      id\n      name\n      streetAddress\n      venueTypes {\n        name\n      }\n    }\n  }\n"]);return Ce=function(){return e},e}const Ne=Object(c.gql)(Ce()),Te=Object(c.gql)(Ie()),ke=Object(c.gql)(xe()),we={appBar:{position:"relative"},title:{margin:"0 auto"},body:{margin:"0 auto"},input:{minWidth:"500px"}},De={name:"",type:{id:null},streetAddress:"",zipcode:"",lat:"",lng:"",city:{}};var Ve=({open:e,toggleDialog:t,onCreatedVenue:a})=>{const l=Object(c.useMutation)(Ne,{onError(e){console.log("error",e)},onCompleted(e){a()},refetchQueries:[{query:M}],awaitRefetchQueries:!0}),i=Object(K.a)(l,1)[0],s=Object(r.useState)(Object(n.a)({},De)),u=Object(K.a)(s,2),m=u[0],d=u[1],p=Object(r.useState)("Please enter information about a venue"),g=Object(K.a)(p,2),v=g[0],b=g[1],f=e=>t=>{d(Object(n.a)(Object(n.a)({},m),{},{[e]:t.target.value}))};return o.a.createElement(ae.a,{open:e,onClose:t,fullScreen:!0,"aria-labelledby":"form-dialog-title"},o.a.createElement(ce.a,{style:we.appBar},o.a.createElement(se.a,null,o.a.createElement(de.a,{edge:"start",color:"inherit",onClick:t,"aria-label":"close"},o.a.createElement(me.a,null)))),o.a.createElement(re.a,{style:we.title},"Add New Destination"),o.a.createElement(ne.a,{style:we.body},o.a.createElement(oe.a,null,v),o.a.createElement(le.a,{id:"venue-name",label:"Venue name",value:m.name,onChange:f("name"),margin:"normal",style:we.input}),o.a.createElement("br",null),o.a.createElement(Se,{onVenueTypeSelected:e=>{d(Object(n.a)(Object(n.a)({},m),{},{type:{id:e}}))}}),o.a.createElement("br",null),o.a.createElement(le.a,{id:"venue-street-address",name:"street-address",label:"Street address",value:m.streetAddress,onChange:f("streetAddress"),margin:"normal",autoComplete:"shipping street-address",style:we.input}),o.a.createElement(ye,{onCitySelected:e=>{e&&e.value?d(Object(n.a)(Object(n.a)({},m),{},{city:{id:e.value}})):d(Object(n.a)(Object(n.a)({},m),{},{city:{}}))}}),o.a.createElement(ie.a,{customInput:le.a,id:"venue-zipcode",name:"zipcode",label:"Zipcode",value:m.zipcode,onChange:f("zipcode"),margin:"normal",style:we.input,autoComplete:"postal-code",format:"#####"}),o.a.createElement("div",null,o.a.createElement(ee.a,{color:"primary",onClick:()=>{(({name:e,type:t,streetAddress:a,city:n,zipcode:r})=>{let o={name:!1,type:!1,streetAddress:!1,city:!1,zipcode:!1};return e&&e.length>=2&&(o.name=!0),t&&t.id&&(o.type=!0),a&&a.length>=2&&(o.streetAddress=!0),n&&n.id&&(o.city=!0),r&&!isNaN(parseInt(r))&&(o.zipcode=!0),-1===Object.values(o).indexOf(!1)})(m)?i({variables:{name:m.name,typeId:m.type.id,streetAddress:m.streetAddress,zipcode:parseInt(m.zipcode),cityId:m.city.id}}).then(e=>{d(Object(n.a)({},De)),t()}):b("Please enter valid venue information")}},"Create venue"))))},qe=a(178),$e=a.n(qe),Fe=a(298),Ae=a(286);var Be=Object(Z.a)({appBar:{boxShadow:"none",float:"left",width:"300px"},tabIndicator:{backgroundColor:"#ffffff"}})(({classes:e,venues:t,venueTypeFilter:a,onSetVenueTypeFilter:n})=>o.a.createElement(o.a.Fragment,null,o.a.createElement($e.a,{position:"static",className:e.appBar},o.a.createElement(Fe.a,{value:a,onChange:(e,t)=>{n(t)},classes:{indicator:e.tabIndicator},orientation:"vertical",variant:"scrollable",scrollButtons:"auto"},o.a.createElement(Ae.a,{label:"all",value:"all"}),(e=>{let t={};for(let a=0;a<e.length;a++)e[a].venueTypes&&e[a].venueTypes.length&&(t[e[a].venueTypes[0].name]?t[e[a].venueTypes[0].name].venues.push(e[a]):t[e[a].venueTypes[0].name]={type:{id:e[a].venueTypes[0].id,name:e[a].venueTypes[0].name},venues:[e[a]]});return Object.keys(t)})(t).sort().map((e,t)=>o.a.createElement(Ae.a,{label:e,value:e,key:t})))))),Me=a(287),Ue=a(288),Le=a(289),We=a(290),ze=a(291),Pe=a(292),Re=a(293),Qe=a(294);const _e=e=>{const t="".concat(e.streetAddress,", ").concat(e.city,", ").concat(e.state," ").concat(e.zipcode);return"https://maps.google.com/?q=".concat(encodeURIComponent(t))},He=e=>"".concat(e.city,", ").concat(e.state),Ge=(e,t=", ",a="")=>e?"raw"===a?"".concat(e.streetAddress).concat(t).concat(He(e)," ").concat(e.zipcode):o.a.createElement("span",null,e.streetAddress,t,He(e)," ",e.zipcode):"";var Je=Object(Z.a)({"@global":{".venueItem":{border:"1px solid #eee",borderRadius:"8px",marginTop:"5px",marginBottom:"5px",padding:"15px",width:"49%",display:"inline-block","&:nth-child(odd)":{marginRight:"10px"}},".venueItemTitle":{display:"block",fontSize:"18px",fontWeight:500,lineHeight:1.6,color:"#333333",textDecoration:"none","&:hover":{textDecoration:"underline"}},".venueItemDescription":{},".venueItemTypeBadge":{display:"inline-block",padding:"1px 5px",backgroundColor:"#2196f3",color:"#fff",borderRadius:"3px",height:"22px"},".venueItemTypeBadgeText":{marginLeft:"20px",marginTop:"3px",textTransform:"uppercase",fontSize:"11px",fontWeight:600,minWidth:"75px",textAlign:"center"},".venueItemLocation":{textTransform:"uppercase",fontSize:"11px",fontWeight:600,textDecoration:"none",float:"right",marginTop:"4px",color:"#666"},".venueIcon":{float:"left",width:"15px",height:"auto",marginRight:"5px",position:"relative",top:"2px"},".venueUnlike":{float:"right"}}})(e=>{const t=e.venue,a=e.showDeleteFavoriteButton,n=e.onDeleteFavoriteCallback,r=Object(c.useMutation)(ke,{onError(e){console.log("error",e)},update:(e,{data:{deleteUserVenueFavorite:t}})=>{i(e,t)},onCompleted:()=>{n()},refetchQueries:[{query:M}],awaitRefetchQueries:!0}),l=Object(K.a)(r,1)[0],i=(e,a)=>{try{let n=e.readQuery({query:B,variables:{venueSlug:t.slug}});n.venueBySlug.venueStats=a,e.writeQuery({query:B,variables:{venueSlug:t.slug},data:n})}catch(n){}};return o.a.createElement("div",{className:"venueItem"},a&&o.a.createElement("button",{onClick:()=>{l({variables:{venueId:t.id}})},className:"venueUnlike"},"Unlike"),o.a.createElement(X.b,{to:p.venuePath(t.slug),className:"venueItemTitle"},t.name),o.a.createElement("div",{className:"venueItemDescription"},o.a.createElement("div",{className:"venueItemTypeBadge"},((e,t)=>{let a;switch(e.venueTypes[0].name){case"restaurant":a=o.a.createElement(Me.a,{className:t});break;case"museum":a=o.a.createElement(Ue.a,{className:t});break;case"zoo":a=o.a.createElement(Le.a,{className:t});break;case"hiking trail":a=o.a.createElement(We.a,{className:t});break;case"outdoor park":a=o.a.createElement(ze.a,{className:t});break;case"camp site":a=o.a.createElement(Pe.a,{className:t});break;case"outdoor playground":a=o.a.createElement(Re.a,{className:t});break;default:a=o.a.createElement(Qe.a,{className:t})}return a})(t,"venueIcon"),o.a.createElement("div",{className:"venueItemTypeBadgeText"},t.venueTypes&&t.venueTypes.length?"".concat(t.venueTypes[0].name):"")),o.a.createElement("a",{href:_e(t),target:"_blank",rel:"noopener noreferrer",className:"venueItemLocation"},He(t))))});var Ye=Object(Z.a)({"@global":{".venueList":{marginLeft:"320px"}}})(({currentDashboardSection:e,isFavoritesDashboardSection:t,externalTriggerVenueRefresh:a})=>{const n=Object(c.useApolloClient)(),l=Object(r.useState)("all"),i=Object(K.a)(l,2),s=i[0],u=i[1],m=Object(r.useState)([]),d=Object(K.a)(m,2),p=d[0],g=d[1],v=Object(r.useState)(!0),b=Object(K.a)(v,2),f=b[0],h=b[1];Object(r.useEffect)(()=>{n.query({query:M}).then(({data:e})=>{g(t?e.me.favoriteVenues:e.me.venues)}),u("all")},[e,f,a,t,n]);const y=()=>{h(!f)};return o.a.createElement(r.Fragment,null,o.a.createElement(Be,{venues:p,onSetVenueTypeFilter:u,venueTypeFilter:s}),o.a.createElement("div",{className:"venueList"},p.filter(e=>"all"===s||e.venueTypes[0].name===s).map(e=>o.a.createElement(Je,{key:e.id,venue:e,showDeleteFavoriteButton:t,onDeleteFavoriteCallback:y}))))});function Ke(){const e=Object(I.a)(["\n  mutation UpdateCurrentUserFeedConfigMutation(\n    $cityIds: String\n    $venueTypeIds: String\n  ) {\n    updateUserFeedConfig(cityIds: $cityIds, venueTypeIds: $venueTypeIds) {\n      cityIds\n      venueTypeIds\n    }\n  }\n"]);return Ke=function(){return e},e}function Ze(){const e=Object(I.a)(["\n  mutation LoginMutation($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        id\n        firstName\n        lastName\n        email\n      }\n    }\n  }\n"]);return Ze=function(){return e},e}function Xe(){const e=Object(I.a)(["\n  mutation SignupMutation(\n    $email: String!\n    $password: String!\n    $firstName: String!\n    $lastName: String!\n  ) {\n    signup(\n      email: $email\n      password: $password\n      firstName: $firstName\n      lastName: $lastName\n    ) {\n      token\n      user {\n        id\n        firstName\n        lastName\n        email\n      }\n    }\n  }\n"]);return Xe=function(){return e},e}const et=Object(c.gql)(Xe()),tt=Object(c.gql)(Ze()),at=Object(c.gql)(Ke());var nt=Object(Z.a)({"@global":{".feedItem":{borderBottom:"1px solid #eee",marginTop:"5px",marginBottom:"5px",padding:"15px"},".feedItemTitle":{fontWeight:600,color:"#000",textDecoration:"none",fontSize:"15px","&:hover":{textDecoration:"underline"}},".feedItemSubtitle":{fontSize:"12px"}}})(({venue:e})=>{return o.a.createElement("div",{className:"feedItem"},o.a.createElement(X.b,{to:p.venuePath(e.slug),className:"feedItemTitle"},e.name),o.a.createElement("div",{className:"feedItemSubtitle"},"in ",He(e),e.creator&&o.a.createElement(r.Fragment,null,o.a.createElement("br",null),"added ",(e=>{const t=new Date(e),a=((new Date).getTime()-t.getTime())/1e3;let n;return n=a<=60?"now":a<90?Math.round(a/60)+" minute ago":a<=3600?Math.round(a/60)+" minutes ago":a<5400?Math.round(a/3600)+" hour ago":a<=86400?Math.round(a/3600)+" hours ago":"on "+t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),n})(e.createdAt)," by \xa0",o.a.createElement(X.b,{to:p.userProfilePath(e.creator.id)},(t=e.creator)&&t.firstName&&t.lastName?"".concat(t.firstName," ").concat(t.lastName[0],"."):""))));var t});const rt={container:{position:"relative",width:"350px",display:"inline-block"},formControl:{minWidth:"500px",marginTop:"16px",marginBottom:"8px",height:"16px"}};var ot=({initialValue:e,onVenueTypeSelected:t})=>{const a=Object(c.useApolloClient)(),n=Object(r.useState)([]),l=Object(K.a)(n,2),i=l[0],s=l[1],u=Object(r.useState)([]),m=Object(K.a)(u,2),d=m[0],p=m[1];Object(r.useEffect)(()=>{a.query({query:U}).then(({data:e})=>{p(e.venueTypes.map(e=>({value:e.id,label:e.name})))})},[a]),Object(r.useEffect)(()=>{if(d&&d.length&&e){const t=e.split(",").map(e=>parseInt(e));s(d.filter(e=>t.includes(e.value)))}},[d,e]);return o.a.createElement("div",{style:rt.container},o.a.createElement(fe.a,{style:rt.formControl},o.a.createElement(be.a,{shrink:!0,htmlFor:"age-simple"},"Venue type")),o.a.createElement(pe.a,{value:i,defaultValue:null,onChange:e=>{s(e),t(e)},options:d,placeholder:"Select venue type",isClearable:!0,isMulti:!0,isSearchable:!1,escapeClearsValue:!0}))};var lt=({feedConfiguration:e,onFeedConfigurationUpdated:t})=>{const a=Object(r.useState)(),n=Object(K.a)(a,2),l=n[0],i=n[1],c=Object(r.useState)(),s=Object(K.a)(c,2),u=s[0],m=s[1];Object(r.useEffect)(()=>{i(e.cityIds),m(e.venueTypeIds)},[e]);return o.a.createElement("div",null,o.a.createElement(ye,{onCitySelected:e=>{const a=e?e.map(e=>e.value).join(","):null;i(a),t({cityIds:a,venueTypeIds:u})},fieldLabel:"Filter feed by city",placeholder:"e.g.: San Francisco, CA",isMulti:!0,containerWidth:"350px",containerDisplay:"inline-block",initialValue:e.cityDetails}),o.a.createElement("div",{style:{display:"inline-block",width:"30px",height:"20px"}}),o.a.createElement(ot,{initialValue:u,onVenueTypeSelected:e=>{const a=e?e.map(e=>e.value).join(","):null;m(a),t({venueTypeIds:a,cityIds:l})}}))};var it=Object(Z.a)({"@global":{".feedContainer":{maxWidth:"50%",minWidth:"400px"}}})(()=>{const e=Object(c.useApolloClient)(),t=Object(r.useState)([]),a=Object(K.a)(t,2),l=a[0],i=a[1],s=Object(r.useState)({cityIds:null,venueTypeIds:null,sort:"DESC",first:25,init:!1}),u=Object(K.a)(s,2),m=u[0],d=u[1],p=Object(c.useMutation)(at),g=Object(K.a)(p,1)[0];Object(r.useEffect)(()=>{e.query({query:_}).then(({data:e})=>{d(Object(n.a)({init:!0,sort:"DESC",first:25},e.userFeedConfig))})},[e]),Object(r.useEffect)(()=>{m.init&&e.query({query:W,variables:Object(n.a)({},m)}).then(({data:e})=>{i(e.venues)})},[e,m]);return o.a.createElement("div",null,o.a.createElement(lt,{feedConfiguration:m,onFeedConfigurationUpdated:e=>{e&&d(Object(n.a)(Object(n.a)({},e),{},{init:!0})),g({variables:{cityIds:e.cityIds,venueTypeIds:e.venueTypeIds}})}}),o.a.createElement("div",{className:"feedContainer"},l.map(e=>o.a.createElement(nt,{key:e.id,venue:e}))))});var ct=e=>class extends o.a.Component{render(){return o.a.createElement("div",{className:"mainContainer"},o.a.createElement("div",{className:"mainContent"},o.a.createElement(e,this.props)))}};const st={FEED:"feed",FOLLOWED_DESTINATIONS:"followed-destinations",MY_DESTINATIONS:"my-destinations",FAVORITES:"favorites"};var ut=Object(Z.a)({"@global":{".sectionHeader":{marginBottom:"30px",display:"flex"},".sectionHeaderTitle":{flexGrow:2,maxWidth:"250px",cursor:"pointer",textDecoration:"none",color:"#666",textAlign:"center",textTransform:"uppercase",borderRadius:"8px",margin:"0px 10px",fontSize:"14px",fontWeight:600,lineHeight:2.5,letterSpacing:"1.3px",border:"1px solid #eee"},".sectionHeaderTitleSelected":{backgroundColor:"#f9f8f8"},".venueList":{marginLeft:"320px"}}})(ct(({match:e})=>{const t=p.validatePageSection(e.params.section,st,st.FEED),a=Object(r.useState)(!1),n=Object(K.a)(a,2),l=n[0],i=n[1],c=Object(r.useState)(!0),s=Object(K.a)(c,2),u=s[0],m=s[1],d=()=>{i(!l)},g=(e,a)=>o.a.createElement(X.b,{to:p.dashboardPath(a),className:"sectionHeaderTitle ".concat(t===a?"sectionHeaderTitleSelected":"")},e);return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"sectionHeader"},g("Feed",st.FEED),g("My destinations",st.MY_DESTINATIONS),g("Favorite destinations",st.FAVORITES),o.a.createElement(ee.a,{variant:"outlined",style:{marginLeft:"auto"},onClick:d},o.a.createElement(te.a,null),"Add Destination"),o.a.createElement(Ve,{open:l,toggleDialog:d,onCreatedVenue:()=>m(!u)})),t===st.FEED?o.a.createElement(it,null):o.a.createElement(Ye,{currentDashboardSection:t,isFavoritesDashboardSection:t===st.FAVORITES,externalTriggerVenueRefresh:u}))})),mt=a(179),dt=a.n(mt),pt=e=>{const t=e.venue,a=v("/images/".concat((e=>e.venueTypes[0].image||"restaurant-header-cmp.jpg")(t)),"300px");return o.a.createElement("div",{style:a.container},o.a.createElement(g.a,{variant:"h2",style:a.headerText},o.a.createElement("strong",null,t.name)))};a(124);var gt=({venue:e})=>{const t=Object(c.useApolloClient)(),a=Object(r.useState)([]),n=Object(K.a)(a,2),l=n[0],i=n[1];return Object(r.useEffect)(()=>{t.query({query:L,variables:{venueId:e.id,limit:5,radius:10}}).then(({data:e})=>{i(e.similarVenues)})},[e,t]),o.a.createElement("div",{className:"sidebar-module",style:{display:l&&l.length?"block":"none"}},o.a.createElement("h3",null,"Similar places near by"),o.a.createElement("div",{className:"sidebar-module-body"},l&&l.map(e=>o.a.createElement("div",{key:e.id},o.a.createElement(X.b,{to:p.venuePath(e.slug)},e.name)))))};var vt=({venue:e})=>o.a.createElement("div",{className:"sidebar-module"},o.a.createElement("h3",null,"Location"),o.a.createElement("div",{className:"sidebar-module-body"},o.a.createElement("a",{href:"".concat("https://maps.google.com/?daddr=").concat(encodeURIComponent(Ge(e,",","raw"))),target:"_blank",rel:"noopener noreferrer"},Ge(e,o.a.createElement("br",null))))),bt=({venueId:e,venueSlug:t,favoriteByCurrentUser:a,onUpdateFavoritesStats:r})=>{const l=[{query:M}],i=(e,a)=>{let o=e.readQuery({query:B,variables:{venueSlug:t}});r(a),e.writeQuery({query:B,variables:{venueSlug:t},data:Object(n.a)(Object(n.a)({},o),{},{venueBySlug:Object(n.a)(Object(n.a)({},o.venueBySlug),{},{venueStats:Object(n.a)({},a)})})})},s=Object(c.useMutation)(Te,{onError(e){console.log("error",e)},update:(e,{data:{createUserVenueFavorite:t}})=>{i(e,t)},refetchQueries:l}),u=Object(K.a)(s,1)[0],m=Object(c.useMutation)(ke,{onError(e){console.log("error",e)},update:(e,{data:{deleteUserVenueFavorite:t}})=>{i(e,t)},refetchQueries:l}),d=Object(K.a)(m,1)[0];return o.a.createElement(o.a.Fragment,null,a?o.a.createElement("span",null,"\u2605\xa0",o.a.createElement("button",{onClick:t=>{t.preventDefault(),d({variables:{venueId:e}})}}," ","Unlike")):o.a.createElement("button",{href:"#",onClick:t=>{t.preventDefault(),u({variables:{venueId:e}})}},"Like"))};const ft={sectionHeader:{marginBottom:"15px"},columnWrapper:{display:"flex"},mainColumn:{flexGrow:3,maxWidth:"800px"},sideColumm:{flexGrow:1,marginTop:"-20px"}};var ht=({match:e})=>{const t=e.params.venueSlug,a=Object(r.useState)(null),l=Object(K.a)(a,2),i=l[0],s=l[1],u=Object(r.useState)(""),m=Object(K.a)(u,2),d=m[0],p=m[1],v=Object(c.useQuery)(B,{variables:{venueSlug:t}}),b=v.loading,f=v.error,h=v.data;Object(r.useEffect)(()=>{h&&(s(h.venueBySlug),p((e=>e.venueTypes[0].name||"venue")(h.venueBySlug)))},[h]);const y=e=>{s(Object(n.a)(Object(n.a)({},i),{},{venueStats:Object(n.a)({},e)}))};return b?null:f?"Error! ".concat(f):t?i&&o.a.createElement("div",null,o.a.createElement(pt,{venue:i}),o.a.createElement("div",{className:"mainContainer"},o.a.createElement("div",{className:"mainContent"},o.a.createElement(g.a,{variant:"h5",style:ft.sectionHeader},i.name),o.a.createElement("div",{style:ft.columnWrapper},o.a.createElement("div",{style:ft.mainColumn},o.a.createElement("div",null,"Liked by"," ",o.a.createElement("strong",null,o.a.createElement(ie.a,{value:i.venueStats.favorites,thousandSeparator:!0,displayType:"text"})," ",dt()("person",i.venueStats.favorites)),". \xa0",G()&&o.a.createElement(bt,{venueId:i.id,venueSlug:t,favoriteByCurrentUser:i.venueStats.favoriteByCurrentUser,onUpdateFavoritesStats:y})),o.a.createElement("br",null),i.description&&o.a.createElement("span",null,i.description),"This ",d," is located in ",i.city,", ",i.state,"."),o.a.createElement("div",{style:ft.sideColumm},o.a.createElement(vt,{venue:i}),o.a.createElement(gt,{venue:i})))))):o.a.createElement("div",null,"Venue not found.")},yt=a(297),Et=a(285),Ot=a(181),jt=a(129),St=a.n(jt),xt=Object(Ot.a)({palette:{primary:{main:St.a[500]},background:{default:"#efefef"}},typography:{useNextVariants:!0}}),It=a(80),Ct=a.n(It),Nt=a(180),Tt=a.n(Nt),kt=a(182),wt=a(67),Dt=a.n(wt),Vt=a(116),qt=a(56),$t=a(296);class Ft extends r.Component{constructor(...e){var t;super(...e),t=this,this.state={login:void 0===this.props.login||this.props.login,email:"",password:"",firstName:"",lastName:"",errorMessage:null},this._update=function(){var e=Object(Vt.a)(Dt.a.mark((function e(t,a){return Dt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.writeQuery({query:Q,data:{currentUser:Object(n.a)(Object(n.a)({},a.user),{},{token:a.token})}});case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this._confirm=function(){var e=Object(Vt.a)(Dt.a.mark((function e(a){var n,r,o;return Dt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state.error=null,n=t.state.login?a.login:a.signup,r=n.token,o=n.user,t._saveUserData(r,o),document.location=p.dashboardPath("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._saveUserData=(e,t)=>{((e,t)=>{localStorage.setItem("auth-token",e),localStorage.setItem("user-info",JSON.stringify(t))})(e,t)},this._error=function(){var e=Object(Vt.a)(Dt.a.mark((function e({graphQLErrors:a}){return Dt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state.login&&a&&a[0]&&a[0].message?t.setState({errorMessage:a[0].message}):a&&a[0]&&a[0].extensions.exception.errors[0].message&&t.setState({errorMessage:a[0].extensions.exception.errors[0].message});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}componentDidUpdate(e){e.open!==this.props.open&&this.setState({errorMessage:null}),e.login!==this.props.login&&this.setState({login:this.props.login})}render(){const e=this.state,t=e.login,a=e.email,n=e.password,r=e.firstName,l=e.lastName,i=e.errorMessage,c=this.props.classes;return o.a.createElement(ae.a,{open:this.props.open,onClose:this.props.toggleDialog,maxWidth:"sm",fullWidth:!0,"aria-labelledby":"form-dialog-title"},o.a.createElement(re.a,{id:"login-dialog-title"},t?"Login":"Sign Up"),o.a.createElement(ne.a,null,i&&o.a.createElement(oe.a,{className:c.dialogMainError},i),o.a.createElement("div",{className:c.dialogMainContent},!t&&o.a.createElement("span",null,o.a.createElement(le.a,{id:"firstName",label:"First name",error:!!i,value:r,onChange:e=>this.setState({firstName:e.target.value}),margin:"normal",fullWidth:!0}),o.a.createElement(le.a,{id:"lastName",label:"Last name",error:!!i,value:l,onChange:e=>this.setState({lastName:e.target.value}),margin:"normal",fullWidth:!0})),o.a.createElement(le.a,{id:"email",label:"Email",error:!!i,value:a,onChange:e=>this.setState({email:e.target.value}),margin:"normal",fullWidth:!0}),o.a.createElement(le.a,{id:"password",label:"Password",error:!!i,type:"password",autoComplete:"current-password",onChange:e=>this.setState({password:e.target.value}),margin:"normal",fullWidth:!0}))),o.a.createElement($t.a,null,o.a.createElement(ee.a,{onClick:()=>this.setState({login:!t,errorMessage:null}),color:"primary",style:{marginRight:"auto"}},t?"need to create an account?":"already have an account?"),o.a.createElement(ee.a,{onClick:this.props.toggleDialog,color:"primary"},"Cancel"),o.a.createElement(qt.Mutation,{mutation:t?tt:et,variables:{email:a,password:n,firstName:r,lastName:l},update:(e,{data:a})=>this._update(e,t?a.login:a.signup),onCompleted:e=>this._confirm(e),onError:e=>this._error(e)},e=>o.a.createElement(ee.a,{color:"primary",onClick:e},t?"login":"create account"))))}}var At=Object(m.f)(Object(Z.a)({dialogMainContent:{display:"flex",justifyContent:"center",flexDirection:"column"},dialogMainError:{textAlign:"center"}})(Ft));var Bt,Mt=(Bt=Object(m.f)(({currentUser:e,className:t})=>{const a=Object(r.useState)(!1),n=Object(K.a)(a,2),l=n[0],i=n[1],c=Object(r.useState)(!0),s=Object(K.a)(c,2),u=s[0],m=s[1];Object(r.useEffect)(()=>{var e;e=()=>{(void 0).setState({dialogOpen:!0,login:!1}),i(!0),m(!1)},window.addEventListener("openSignUpModal",()=>e())});const d=()=>{i(!l),m(!0)};return G()?o.a.createElement(g.a,{variant:"button",color:"inherit",className:t},(e=>e&&e.id?"Welcome, ".concat(e.firstName):"")(e)):o.a.createElement("span",null,o.a.createElement(ee.a,{onClick:d,className:t,color:"inherit"},"Login"),o.a.createElement(At,{open:l,login:u,toggleDialog:d}))}),Object(x.a)(Object(S.graphql)(Q,{props:({data:{currentUser:e}})=>({currentUser:e})}))(Bt));class Ut extends r.Component{constructor(...e){super(...e),this.state={anchorEl:null},this.toggleMenu=e=>{this.state.anchorEl?this.setState({anchorEl:null}):this.setState({anchorEl:e.currentTarget})}}render(){const e=this.props.classes;return o.a.createElement("div",{className:e.root},o.a.createElement(ce.a,{position:"fixed",style:{background:"transparent",boxShadow:"none"}},o.a.createElement(se.a,{variant:"dense",className:e.container},o.a.createElement(g.a,{className:e.logoText,variant:"button",color:"inherit"},"KidTrip"),o.a.createElement(g.a,{variant:"h6",color:"inherit",className:e.grow}),o.a.createElement(Mt,{className:e.loginButton}),G()&&o.a.createElement("span",{className:e.menuWrapper},o.a.createElement(de.a,{onClick:this.toggleMenu,className:e.menuButton,color:"inherit","aria-label":"Menu"},o.a.createElement(Tt.a,null)),o.a.createElement(kt.a,{id:"simple-menu",anchorEl:this.state.anchorEl,open:Boolean(this.state.anchorEl),onClose:this.toggleMenu},o.a.createElement(Oe.a,{component:X.b,to:p.home,onClick:this.toggleMenu},"Home"),o.a.createElement(Oe.a,{component:X.b,to:p.dashboardPath(""),onClick:this.toggleMenu},"Dashboard"),o.a.createElement(Oe.a,{onClick:this.toggleMenu},"My account"),o.a.createElement(Oe.a,{onClick:()=>{localStorage.removeItem("auth-token"),localStorage.removeItem("user-info"),this.props.history.push("/")}},"Logout"))))))}}var Lt=Object(m.f)(Ut);const Wt={root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},menuWrapper:{marginLeft:15}},zt=Object(n.a)(Object(n.a)({},Wt),{},{container:{borderBottom:"1px solid",borderBottomColor:Ct.a[100],backgroundColor:"white"},grow:Object(n.a)(Object(n.a)({},Wt.grow),{},{color:Ct.a[500]}),menuButton:Object(n.a)(Object(n.a)({},Wt.menuButton),{},{color:Ct.a[500]}),loginButton:{color:Ct.a[500]},logoText:{color:Ct.a[500]}});var Pt=Object(m.f)(e=>{const t=d(e.location)?Wt:zt,a=Object(Z.a)(t)(Lt);return o.a.createElement(a,null)});var Rt=({title:e,venues:t})=>(console.log("here",t),o.a.createElement("div",{className:"sidebar-module"},o.a.createElement("h3",null,e),o.a.createElement("div",{className:"sidebar-module-body"},t.map(e=>o.a.createElement(nt,{key:e.id,venue:e})))));a(245);var Qt=ct(({match:e})=>{const t=e.params.userId,a=Object(r.useState)(null),l=Object(K.a)(a,2),i=l[0],s=l[1],u=Object(c.useQuery)(H,{variables:{publicId:t}}).data;if(Object(r.useEffect)(()=>{u&&s(u.userProfile)},[u]),t){if(i){const e=v(i.config.headerImageUrl,"300px");return o.a.createElement("div",null,o.a.createElement("div",{style:Object(n.a)(Object(n.a)({},e.container),{},{borderRadius:"8px"})},o.a.createElement("div",{className:"headerUserInfo"},o.a.createElement("strong",null,i.user.firstName,i.user.lastName&&i.user.lastName.length&&o.a.createElement(r.Fragment,null,"\xa0",i.user.lastName[0]),"."),"\xa0\xb7\xa0",o.a.createElement("span",null,i.stats.created," added"),"\xa0\xb7\xa0",o.a.createElement("span",null,i.stats.favorited," liked"))),o.a.createElement("div",{className:"contentContainer"},o.a.createElement("div",{className:"contentContainerMain"},"More to come..."),o.a.createElement("div",{className:"contentContainerSide"},i.recentAddedVenues&&i.recentAddedVenues.length&&o.a.createElement(Rt,{title:"Recently added",venues:i.recentAddedVenues}),i.recentFavoriteVenues&&i.recentFavoriteVenues.length&&o.a.createElement(Rt,{title:"Recently liked",venues:i.recentFavoriteVenues}))))}return!1}return o.a.createElement("div",null,"User profile not found.")});class _t extends r.Component{render(){const e=this.props,t=e.classes,a=e.location;return o.a.createElement(Et.a,{theme:xt},o.a.createElement("div",null,o.a.createElement(yt.a,null),o.a.createElement(Pt,null),!d(a)&&o.a.createElement("div",{className:t.appBarSpacer}),o.a.createElement(m.c,null,o.a.createElement(m.a,{exact:!0,path:p.home,component:Y}),o.a.createElement(m.a,{path:p.dashboard,component:ut}),o.a.createElement(m.a,{path:p.venue,component:ht}),o.a.createElement(m.a,{path:p.userProfile,component:Qt}))))}}var Ht=Object(m.f)(Object(Z.a)({"@global":{body:{fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:400},".mainContainer":{display:"flex",justifyContent:"center"},".mainContent":{maxWidth:"1200px",flexGrow:"1",margin:"25px",backgroundColor:"#ffffff",padding:"25px",borderRadius:"8px"}},appBarSpacer:{height:"49px"}})(_t));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(246);const Gt=localStorage.getItem("auth-token"),Jt=new c.HttpLink({uri:"http://api.mykidtrip.com",credentials:"same-origin",headers:{authorization:Gt?"Bearer ".concat(Gt):""}}),Yt=new c.ApolloClient({link:c.ApolloLink.from([Object(u.a)(({graphQLErrors:e,networkError:t})=>{e&&e.map(({message:e,locations:t,path:a})=>console.log("[GraphQL error]: Message: ".concat(e,", Location: ").concat(t,", Path: ").concat(a))),t&&console.log("[Network error]: ".concat(t))}),Jt]),cache:new s.InMemoryCache,resolvers:{}});Yt.writeQuery({query:Q,data:{currentUser:Object(n.a)({},(()=>{const e=localStorage.getItem("user-info");return e?JSON.parse(e):{__typename:"User",id:null,firstName:null,lastName:null,email:null}})())}}),i.a.render(o.a.createElement(X.a,null,o.a.createElement(c.ApolloProvider,{client:Yt},o.a.createElement(Ht,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[203,1,2]]]);
//# sourceMappingURL=main.e8f050f2.chunk.js.map