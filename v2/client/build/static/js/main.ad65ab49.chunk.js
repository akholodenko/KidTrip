(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{128:function(e,t,a){},169:function(e,t,a){e.exports=a(211)},179:function(e,t,a){},180:function(e,t,a){},182:function(e,t,a){},183:function(e,t,a){},211:function(e,t,a){"use strict";a.r(t);var n=a(13),r=a(0),o=a.n(r),i=a(17),l=a.n(i),s=a(52),c=a(112),u=a(148),m=a(144),d=a(26),p=a(12),g=a(147),v=a(15),f="/",b="/dashboard/:section?",h=e=>"/dashboard/".concat(e),y="/venue/:venueSlug",E=e=>"/venue/".concat(e),O=(e,t,a)=>Object.values(t).includes(e)?e:a;const j=e=>e.pathname===f;var S=a(150);const x=(e,t)=>({container:{display:"flex",flexWrap:"wrap",flexDirection:"column",justifyContent:"center",alignItems:"center",background:"linear-gradient(rgba(0, 0, 0, 0.5),rgba(0, 0, 0, 0.5)),url(/images/".concat(e,") 50% 50% no-repeat"),backgroundSize:"cover",height:t},headerText:{color:"#ffffff"}}),I=x("family-biking-cmp.jpg","700px");var C=()=>o.a.createElement("div",{style:I.container},o.a.createElement(S.a,{variant:"h2",style:I.headerText},o.a.createElement("strong",null,"Experience")," childhood, again.")),N=(a(179),e=>{const t=e.title,a=e.icon,n=e.text,r={background:"url(/images/icons/".concat(a,".png) 0% 0% / 60px 60px no-repeat"),width:"60px",height:"60px"};return o.a.createElement("div",{className:"value-prop-section"},o.a.createElement("div",{className:"value-prop-title"},t),o.a.createElement("div",{className:"value-prop-icon",style:r}),o.a.createElement("div",{className:"value-prop-text"},n))});a(180);const T={title:"Discover",icon:"discover",text:"Find out about great local places to visit with your family. From restaurants, to museums, \n\tparks and playgrounds, make the most of your time!"},k={title:"Track",icon:"track",text:"Had a great time sharing a meal with your family or enjoyed a hiking trail? Jot it down to build your \n\troster of go-to places for your trips."},w={title:"Share",icon:"share",text:"Share your favorite places to visit with friends and family, and hear about what others are \n\tenjoying, for great new ideas."};var D=()=>o.a.createElement("div",{className:"value-prop-container"},o.a.createElement(N,T),o.a.createElement(N,k),o.a.createElement(N,w));var $=a(240),V=a(149),F=a(19),B=a(20),U=a.n(B);function M(){const e=Object(F.a)(["\n  query {\n    userFeedConfig {\n      cityIds\n      venueTypeIds\n      cityDetails {\n        id\n        name\n        state\n      }\n    }\n  }\n"]);return M=function(){return e},e}function q(){const e=Object(F.a)(["\n  query {\n    currentUser @client {\n      id\n      firstName\n      lastName\n    }\n  }\n"]);return q=function(){return e},e}const A=U()(q()),W=U()(M()),L=()=>!!localStorage.getItem("auth-token");a(182),a(183);var z=()=>o.a.createElement("div",null,!L()&&o.a.createElement("div",null,o.a.createElement("button",{className:"form-button homepage-signup-button",onClick:()=>(()=>{const e=new Event("openSignUpModal");window.dispatchEvent(e)})()},"Get Started"))),R=()=>o.a.createElement("div",null,o.a.createElement(C,null),o.a.createElement(D,null),o.a.createElement(z,null)),_=a(11),H=a(7),Q=a(29),G=a(250),J=a(261),P=a(267),Y=a(248),K=a(247),Z=a(249),X=a(269),ee=a(92),te=a(244),ae=a(245),ne=a(140),re=a.n(ne),oe=a(246),ie=a(95);function le(){const e=Object(F.a)(["\n\tquery ($limit: Int, $query: String) {\n\t\tcities(first: $limit, query: $query) {\n\t\t\tid\n\t\t\tname\n\t\t\tstate\n\t\t}\n\t}\n"]);return le=function(){return e},e}const se=U()(le());var ce=a(270),ue=a(241);const me={container:{position:"relative",width:"500px"},formControl:{minWidth:"500px",marginTop:"16px",marginBottom:"8px",height:"16px"}};var de=Object($.b)(({client:e,onCitySelected:t,isMulti:a,fieldLabel:i,placeholder:l,containerWidth:s,containerDisplay:c,initialValue:u})=>{const m=Object(r.useState)(""),d=Object(_.a)(m,2),p=d[0],g=d[1],v=Object(r.useState)(a?[]:{}),f=Object(_.a)(v,2),b=f[0],h=f[1],y=Object(r.useState)([]),E=Object(_.a)(y,2),O=E[0],j=E[1];Object(r.useEffect)(()=>{p&&p.length>=3?(t=>e.query({query:se,variables:{limit:10,query:t}}))(p).then(({data:e})=>{j(e.cities.map(e=>({value:e.id,label:"".concat(e.name,", ").concat(e.state)})))}):j([])},[p,e]),Object(r.useEffect)(()=>{u&&Array.isArray(u)&&u.length&&h(u.map(e=>({value:e.id,label:"".concat(e.name,", ").concat(e.state)})))},[u]);return o.a.createElement("div",{style:Object(n.a)(Object(n.a)({},me.container),{},{width:s||"500px",display:c||"block"})},o.a.createElement(ue.a,{style:me.formControl},o.a.createElement(ce.a,{shrink:!0,htmlFor:"age-simple"},i||"City")),o.a.createElement(ie.a,{value:b,defaultValue:null,onChange:e=>{h(e),t(e)},options:O,onInputChange:e=>{g(e)},placeholder:l||"Type in name of city",isClearable:!0,isMulti:!!a,menuIsOpen:O&&O.length,escapeClearsValue:!0}))}),pe=a(265),ge=a(268),ve=a(96);function fe(){const e=Object(F.a)(["\n  query($cityIds: String, $venueTypeIds: String, $sort: String, $first: Int) {\n    venues(\n      cityIds: $cityIds\n      venueTypeIds: $venueTypeIds\n      sort: $sort\n      first: $first\n    ) {\n      id\n      createdAt\n      name\n      slug\n      description\n      streetAddress\n      zipcode\n      city\n      state\n      lat\n      lng\n      creator {\n        id\n        firstName\n        lastName\n      }\n      venueTypes {\n        id\n        name\n        image\n      }\n    }\n  }\n"]);return fe=function(){return e},e}function be(){const e=Object(F.a)(["\n  query($venueId: ID!, $limit: Int, $radius: Int) {\n    similarVenues(id: $venueId, first: $limit, radius: $radius) {\n      id\n      name\n      slug\n      streetAddress\n      zipcode\n      city\n    }\n  }\n"]);return be=function(){return e},e}function he(){const e=Object(F.a)(["\n  query {\n    venueTypes {\n      id\n      name\n      image\n    }\n  }\n"]);return he=function(){return e},e}function ye(){const e=Object(F.a)(["\n  query {\n    me {\n      venues {\n        ...VenueDetails\n      }\n      favoriteVenues {\n        ...VenueDetails\n      }\n    }\n  }\n  ","\n"]);return ye=function(){return e},e}function Ee(){const e=Object(F.a)(["\n  query($venueSlug: String!) {\n    venueBySlug(slug: $venueSlug) {\n      ...VenueDetails\n      ...VenueStats\n    }\n  }\n  ","\n  ","\n"]);return Ee=function(){return e},e}function Oe(){const e=Object(F.a)(["\n  query($venueId: ID!) {\n    venue(id: $venueId) {\n      ...VenueDetails\n      ...VenueStats\n    }\n  }\n  ","\n  ","\n"]);return Oe=function(){return e},e}function je(){const e=Object(F.a)(["\n  query($venueId: ID!) {\n    venue(id: $venueId) {\n      ...VenueDetails\n    }\n  }\n  ","\n"]);return je=function(){return e},e}function Se(){const e=Object(F.a)(["\n  fragment VenueStats on Venue {\n    venueStats {\n      favorites\n      favoriteByCurrentUser\n    }\n  }\n"]);return Se=function(){return e},e}function xe(){const e=Object(F.a)(["\n  fragment VenueDetails on Venue {\n    id\n    name\n    slug\n    description\n    streetAddress\n    zipcode\n    city\n    state\n    lat\n    lng\n    venueTypes {\n      id\n      name\n      image\n    }\n  }\n"]);return xe=function(){return e},e}const Ie=U()(xe()),Ce=U()(Se()),Ne=(U()(je(),Ie),U()(Oe(),Ie,Ce),U()(Ee(),Ie,Ce)),Te=U()(ye(),Ie),ke=U()(he()),we=U()(be()),De=U()(fe()),$e={formControl:{minWidth:"500px",marginTop:"16px",marginBottom:"8px"}};var Ve=({onVenueTypeSelected:e})=>{const t=Object(r.useState)(""),a=Object(_.a)(t,2),n=a[0],i=a[1];return o.a.createElement(ve.b,{query:ke},({loading:t,error:a,data:r})=>{if(t)return"Loading...";if(a)return"Error! ".concat(a.message);const l=r.venueTypes;return o.a.createElement(ue.a,{style:$e.formControl},o.a.createElement(ce.a,{htmlFor:"age-simple"},"Venue Type"),o.a.createElement(pe.a,{value:n,onChange:t=>{return a=t.target.value,i(a),void e(a);var a},inputProps:{name:"type",id:"venue-type"}},l.map(e=>o.a.createElement(ge.a,{key:e.id,value:e.id},e.name))))})};function Fe(){const e=Object(F.a)(["\n  mutation DeleteUserVenueFavorite($venueId: Int!) {\n    deleteUserVenueFavorite(venueId: $venueId) {\n      favorites\n      favoriteByCurrentUser\n    }\n  }\n"]);return Fe=function(){return e},e}function Be(){const e=Object(F.a)(["\n  mutation CreateUserVenueFavorite($venueId: Int!) {\n    createUserVenueFavorite(venueId: $venueId) {\n      favorites\n      favoriteByCurrentUser\n    }\n  }\n"]);return Be=function(){return e},e}function Ue(){const e=Object(F.a)(["\n  mutation CreateVenueMutation(\n    $name: String!\n    $streetAddress: String!\n    $zipcode: Int!\n    $cityId: Int!\n    $typeId: Int!\n  ) {\n    createVenue(\n      name: $name\n      streetAddress: $streetAddress\n      zipcode: $zipcode\n      city: { id: $cityId }\n      venueType: { id: $typeId }\n    ) {\n      id\n      name\n      streetAddress\n      venueTypes {\n        name\n      }\n    }\n  }\n"]);return Ue=function(){return e},e}const Me=U()(Ue()),qe=U()(Be()),Ae=U()(Fe());var We=a(33);const Le={appBar:{position:"relative"},title:{margin:"0 auto"},body:{margin:"0 auto"},input:{minWidth:"500px"}},ze={name:"",type:{id:null},streetAddress:"",zipcode:"",lat:"",lng:"",city:{}};var Re=({open:e,toggleDialog:t,onCreatedVenue:a})=>{const i=Object(We.a)(Me,{onError(e){console.log("error",e)},onCompleted(e){a()},refetchQueries:[{query:Te}],awaitRefetchQueries:!0}),l=Object(_.a)(i,1)[0],s=Object(r.useState)(Object(n.a)({},ze)),c=Object(_.a)(s,2),u=c[0],m=c[1],d=Object(r.useState)("Please enter information about a venue"),p=Object(_.a)(d,2),g=p[0],v=p[1],f=e=>t=>{m(Object(n.a)(Object(n.a)({},u),{},{[e]:t.target.value}))};return o.a.createElement(P.a,{open:e,onClose:t,fullScreen:!0,"aria-labelledby":"form-dialog-title"},o.a.createElement(te.a,{style:Le.appBar},o.a.createElement(ae.a,null,o.a.createElement(oe.a,{edge:"start",color:"inherit",onClick:t,"aria-label":"close"},o.a.createElement(re.a,null)))),o.a.createElement(K.a,{style:Le.title},"Add New Destination"),o.a.createElement(Y.a,{style:Le.body},o.a.createElement(Z.a,null,g),o.a.createElement(X.a,{id:"venue-name",label:"Venue name",value:u.name,onChange:f("name"),margin:"normal",style:Le.input}),o.a.createElement("br",null),o.a.createElement(Ve,{onVenueTypeSelected:e=>{m(Object(n.a)(Object(n.a)({},u),{},{type:{id:e}}))}}),o.a.createElement("br",null),o.a.createElement(X.a,{id:"venue-street-address",name:"street-address",label:"Street address",value:u.streetAddress,onChange:f("streetAddress"),margin:"normal",autoComplete:"shipping street-address",style:Le.input}),o.a.createElement(de,{onCitySelected:e=>{e&&e.value?m(Object(n.a)(Object(n.a)({},u),{},{city:{id:e.value}})):m(Object(n.a)(Object(n.a)({},u),{},{city:{}}))}}),o.a.createElement(ee.a,{customInput:X.a,id:"venue-zipcode",name:"zipcode",label:"Zipcode",value:u.zipcode,onChange:f("zipcode"),margin:"normal",style:Le.input,autoComplete:"postal-code",format:"#####"}),o.a.createElement("div",null,o.a.createElement(G.a,{color:"primary",onClick:()=>{(({name:e,type:t,streetAddress:a,city:n,zipcode:r})=>{let o={name:!1,type:!1,streetAddress:!1,city:!1,zipcode:!1};return e&&e.length>=2&&(o.name=!0),t&&t.id&&(o.type=!0),a&&a.length>=2&&(o.streetAddress=!0),n&&n.id&&(o.city=!0),r&&!isNaN(parseInt(r))&&(o.zipcode=!0),-1===Object.values(o).indexOf(!1)})(u)?l({variables:{name:u.name,typeId:u.type.id,streetAddress:u.streetAddress,zipcode:parseInt(u.zipcode),cityId:u.city.id}}).then(e=>{m(Object(n.a)({},ze)),t()}):v("Please enter valid venue information")}},"Create venue"))))},_e=a(141),He=a.n(_e),Qe=a(264),Ge=a(252);var Je=Object(H.a)({appBar:{boxShadow:"none",float:"left",width:"300px"},tabIndicator:{backgroundColor:"#ffffff"}})(({classes:e,venues:t,venueTypeFilter:a,onSetVenueTypeFilter:n})=>o.a.createElement(o.a.Fragment,null,o.a.createElement(He.a,{position:"static",className:e.appBar},o.a.createElement(Qe.a,{value:a,onChange:(e,t)=>{n(t)},classes:{indicator:e.tabIndicator},orientation:"vertical",variant:"scrollable",scrollButtons:"auto"},o.a.createElement(Ge.a,{label:"all",value:"all"}),(e=>{let t={};for(let a=0;a<e.length;a++)e[a].venueTypes&&e[a].venueTypes.length&&(t[e[a].venueTypes[0].name]?t[e[a].venueTypes[0].name].venues.push(e[a]):t[e[a].venueTypes[0].name]={type:{id:e[a].venueTypes[0].id,name:e[a].venueTypes[0].name},venues:[e[a]]});return Object.keys(t)})(t).sort().map((e,t)=>o.a.createElement(Ge.a,{label:e,value:e,key:t})))))),Pe=a(253),Ye=a(254),Ke=a(255),Ze=a(256),Xe=a(257),et=a(258),tt=a(259),at=a(260);const nt=e=>{const t="".concat(e.streetAddress,", ").concat(e.city,", ").concat(e.state," ").concat(e.zipcode);return"https://maps.google.com/?q=".concat(encodeURIComponent(t))},rt=e=>"".concat(e.city,", ").concat(e.state);var ot=Object(H.a)({"@global":{".venueItem":{border:"1px solid #eee",borderRadius:"8px",marginTop:"5px",marginBottom:"5px",padding:"15px",width:"49%",display:"inline-block","&:nth-child(odd)":{marginRight:"10px"}},".venueItemTitle":{display:"block",fontSize:"18px",fontWeight:500,lineHeight:1.6,color:"#333333",textDecoration:"none","&:hover":{textDecoration:"underline"}},".venueItemDescription":{},".venueItemTypeBadge":{display:"inline-block",padding:"1px 5px",backgroundColor:"#2196f3",color:"#fff",borderRadius:"3px",height:"22px"},".venueItemTypeBadgeText":{marginLeft:"20px",marginTop:"3px",textTransform:"uppercase",fontSize:"11px",fontWeight:600,minWidth:"75px",textAlign:"center"},".venueItemLocation":{textTransform:"uppercase",fontSize:"11px",fontWeight:600,textDecoration:"none",float:"right",marginTop:"4px",color:"#666"},".venueIcon":{float:"left",width:"15px",height:"auto",marginRight:"5px",position:"relative",top:"2px"},".venueUnlike":{float:"right"}}})(e=>{const t=e.venue,a=e.showDeleteFavoriteButton,n=e.onDeleteFavoriteCallback,r=Object(We.a)(Ae,{onError(e){console.log("error",e)},update:(e,{data:{deleteUserVenueFavorite:t}})=>{l(e,t)},onCompleted:()=>{n()},refetchQueries:[{query:Te}],awaitRefetchQueries:!0}),i=Object(_.a)(r,1)[0],l=(e,a)=>{try{let n=e.readQuery({query:Ne,variables:{venueSlug:t.slug}});n.venueBySlug.venueStats=a,e.writeQuery({query:Ne,variables:{venueSlug:t.slug},data:n})}catch(n){}};return o.a.createElement("div",{className:"venueItem"},a&&o.a.createElement("button",{onClick:()=>{i({variables:{venueId:t.id}})},className:"venueUnlike"},"Unlike"),o.a.createElement(Q.b,{to:E(t.slug),className:"venueItemTitle"},t.name),o.a.createElement("div",{className:"venueItemDescription"},o.a.createElement("div",{className:"venueItemTypeBadge"},((e,t)=>{let a;switch(e.venueTypes[0].name){case"restaurant":a=o.a.createElement(Pe.a,{className:t});break;case"museum":a=o.a.createElement(Ye.a,{className:t});break;case"zoo":a=o.a.createElement(Ke.a,{className:t});break;case"hiking trail":a=o.a.createElement(Ze.a,{className:t});break;case"outdoor park":a=o.a.createElement(Xe.a,{className:t});break;case"camp site":a=o.a.createElement(et.a,{className:t});break;case"outdoor playground":a=o.a.createElement(tt.a,{className:t});break;default:a=o.a.createElement(at.a,{className:t})}return a})(t,"venueIcon"),o.a.createElement("div",{className:"venueItemTypeBadgeText"},t.venueTypes&&t.venueTypes.length?"".concat(t.venueTypes[0].name):"")),o.a.createElement("a",{href:nt(t),target:"_blank",rel:"noopener noreferrer",className:"venueItemLocation"},rt(t))))});var it=Object(H.a)({"@global":{".venueList":{marginLeft:"320px"}}})(Object($.b)(({client:e,currentDashboardSection:t,isFavoritesDashboardSection:a,externalTriggerVenueRefresh:n})=>{const i=Object(r.useState)("all"),l=Object(_.a)(i,2),s=l[0],c=l[1],u=Object(r.useState)([]),m=Object(_.a)(u,2),d=m[0],p=m[1],g=Object(r.useState)(!0),v=Object(_.a)(g,2),f=v[0],b=v[1];Object(r.useEffect)(()=>{e.query({query:Te}).then(({data:e})=>{p(a?e.me.favoriteVenues:e.me.venues)}),c("all")},[t,f,n,a,e]);const h=()=>{b(!f)};return o.a.createElement(r.Fragment,null,o.a.createElement(Je,{venues:d,onSetVenueTypeFilter:c,venueTypeFilter:s}),o.a.createElement("div",{className:"venueList"},d.filter(e=>"all"===s||e.venueTypes[0].name===s).map(e=>o.a.createElement(ot,{key:e.id,venue:e,showDeleteFavoriteButton:a,onDeleteFavoriteCallback:h}))))}));function lt(){const e=Object(F.a)(["\n  mutation UpdateCurrentUserFeedConfigMutation(\n    $cityIds: String\n    $venueTypeIds: String\n  ) {\n    updateUserFeedConfig(cityIds: $cityIds, venueTypeIds: $venueTypeIds) {\n      cityIds\n      venueTypeIds\n    }\n  }\n"]);return lt=function(){return e},e}function st(){const e=Object(F.a)(["\n  mutation LoginMutation($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        id\n        firstName\n        lastName\n        email\n      }\n    }\n  }\n"]);return st=function(){return e},e}function ct(){const e=Object(F.a)(["\n  mutation SignupMutation(\n    $email: String!\n    $password: String!\n    $firstName: String!\n    $lastName: String!\n  ) {\n    signup(\n      email: $email\n      password: $password\n      firstName: $firstName\n      lastName: $lastName\n    ) {\n      token\n      user {\n        id\n        firstName\n        lastName\n        email\n      }\n    }\n  }\n"]);return ct=function(){return e},e}const ut=U()(ct()),mt=U()(st()),dt=U()(lt());var pt=Object(H.a)({"@global":{".feedItem":{borderBottom:"1px solid #eee",marginTop:"5px",marginBottom:"5px",padding:"15px"},".feedItemTitle":{fontWeight:600,color:"#000",textDecoration:"none",fontSize:"15px"},".feedItemSubtitle":{fontSize:"12px"}}})(({venue:e})=>{return o.a.createElement("div",{className:"feedItem"},o.a.createElement(Q.b,{to:E(e.slug),className:"feedItemTitle"},e.name),o.a.createElement("div",{className:"feedItemSubtitle"},"in ",rt(e),o.a.createElement("br",null),"added ",(e=>{const t=new Date(e),a=((new Date).getTime()-t.getTime())/1e3;let n;return n=a<=60?"now":a<90?Math.round(a/60)+" minute ago":a<=3600?Math.round(a/60)+" minutes ago":a<5400?Math.round(a/3600)+" hour ago":a<=86400?Math.round(a/3600)+" hours ago":"on "+t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),n})(e.createdAt)," by ",(t=e.creator)&&t.firstName&&t.lastName?"".concat(t.firstName," ").concat(t.lastName[0],"."):""));var t});const gt={container:{position:"relative",width:"350px",display:"inline-block"},formControl:{minWidth:"500px",marginTop:"16px",marginBottom:"8px",height:"16px"}};var vt=Object($.b)(({client:e,initialValue:t,onVenueTypeSelected:a})=>{const n=Object(r.useState)([]),i=Object(_.a)(n,2),l=i[0],s=i[1],c=Object(r.useState)([]),u=Object(_.a)(c,2),m=u[0],d=u[1];Object(r.useEffect)(()=>{e.query({query:ke}).then(({data:e})=>{d(e.venueTypes.map(e=>({value:e.id,label:e.name})))})},[e]),Object(r.useEffect)(()=>{if(m&&m.length&&t){const e=t.split(",").map(e=>parseInt(e));s(m.filter(t=>e.includes(t.value)))}},[m,t]);return o.a.createElement("div",{style:gt.container},o.a.createElement(ue.a,{style:gt.formControl},o.a.createElement(ce.a,{shrink:!0,htmlFor:"age-simple"},"Venue type")),o.a.createElement(ie.a,{value:l,defaultValue:null,onChange:e=>{s(e),a(e)},options:m,placeholder:"Select venue type",isClearable:!0,isMulti:!0,isSearchable:!1,escapeClearsValue:!0}))});var ft=({feedConfiguration:e,onFeedConfigurationUpdated:t})=>{const a=Object(r.useState)(),n=Object(_.a)(a,2),i=n[0],l=n[1],s=Object(r.useState)(),c=Object(_.a)(s,2),u=c[0],m=c[1];Object(r.useEffect)(()=>{l(e.cityIds),m(e.venueTypeIds)},[e]);return o.a.createElement("div",null,o.a.createElement(de,{onCitySelected:e=>{const a=e?e.map(e=>e.value).join(","):null;l(a),t({cityIds:a,venueTypeIds:u})},fieldLabel:"Filter feed by city",placeholder:"e.g.: San Francisco, CA",isMulti:!0,containerWidth:"350px",containerDisplay:"inline-block",initialValue:e.cityDetails}),o.a.createElement("div",{style:{display:"inline-block",width:"30px",height:"20px"}}),o.a.createElement(vt,{initialValue:u,onVenueTypeSelected:e=>{const a=e?e.map(e=>e.value).join(","):null;m(a),t({venueTypeIds:a,cityIds:i})}}))};var bt=Object(H.a)({"@global":{".feedContainer":{maxWidth:"50%",minWidth:"400px"}}})(Object($.b)(({client:e})=>{const t=Object(r.useState)([]),a=Object(_.a)(t,2),i=a[0],l=a[1],s=Object(r.useState)({cityIds:null,venueTypeIds:null,sort:"DESC",first:25}),c=Object(_.a)(s,2),u=c[0],m=c[1],d=Object(We.a)(dt),p=Object(_.a)(d,1)[0];Object(r.useEffect)(()=>{e.query({query:W}).then(({data:e})=>{m(Object(n.a)({sort:"DESC",first:25},e.userFeedConfig))})},[e]),Object(r.useEffect)(()=>{u.cityIds&&u.venueTypeIds&&e.query({query:De,variables:Object(n.a)({},u)}).then(({data:e})=>{l(e.venues)})},[e,u]);return o.a.createElement("div",null,o.a.createElement(ft,{feedConfiguration:u,onFeedConfigurationUpdated:e=>{e&&m(Object(n.a)({},e)),p({variables:{cityIds:e.cityIds,venueTypeIds:e.venueTypeIds}})}}),o.a.createElement("div",{className:"feedContainer"},i.map(e=>o.a.createElement(pt,{key:e.id,venue:e}))))}));const ht={FEED:"feed",FOLLOWED_DESTINATIONS:"followed-destinations",MY_DESTINATIONS:"my-destinations",FAVORITES:"favorites"};var yt=Object(H.a)({"@global":{".sectionHeader":{marginBottom:"30px",display:"flex"},".sectionHeaderTitle":{flexGrow:2,maxWidth:"250px",cursor:"pointer",textDecoration:"none",color:"#666",textAlign:"center",textTransform:"uppercase",borderRadius:"8px",margin:"0px 10px",fontSize:"14px",fontWeight:600,lineHeight:2.5,letterSpacing:"1.3px",border:"1px solid #eee"},".sectionHeaderTitleSelected":{backgroundColor:"#f9f8f8"},".venueList":{marginLeft:"320px"}}})(({match:e})=>{const t=O(e.params.section,ht,ht.FEED),a=Object(r.useState)(!1),n=Object(_.a)(a,2),i=n[0],l=n[1],s=Object(r.useState)(!0),c=Object(_.a)(s,2),u=c[0],m=c[1],d=()=>{l(!i)},p=(e,a)=>o.a.createElement(Q.b,{to:h(a),className:"sectionHeaderTitle ".concat(t===a?"sectionHeaderTitleSelected":"")},e);return o.a.createElement("div",{className:"mainContainer"},o.a.createElement("div",{className:"mainContent"},o.a.createElement("div",{className:"sectionHeader"},p("Feed",ht.FEED),p("My destinations",ht.MY_DESTINATIONS),p("Favorite destinations",ht.FAVORITES),o.a.createElement(G.a,{variant:"outlined",style:{marginLeft:"auto"},onClick:d},o.a.createElement(J.a,null),"Add Destination"),o.a.createElement(Re,{open:i,toggleDialog:d,onCreatedVenue:()=>m(!u)})),t===ht.FEED?o.a.createElement(bt,null):o.a.createElement(it,{currentDashboardSection:t,isFavoritesDashboardSection:t===ht.FAVORITES,externalTriggerVenueRefresh:u})))}),Et=a(142),Ot=a.n(Et),jt=e=>{const t=e.venue,a=x((e=>e.venueTypes[0].image||"restaurant-header-cmp.jpg")(t),"300px");return o.a.createElement("div",{style:a.container},o.a.createElement(S.a,{variant:"h2",style:a.headerText},o.a.createElement("strong",null,t.name)))};a(128);var St=Object($.b)(({client:e,venue:t})=>{const a=Object(r.useState)([]),n=Object(_.a)(a,2),i=n[0],l=n[1];return Object(r.useEffect)(()=>{e.query({query:we,variables:{venueId:t.id,limit:5,radius:10}}).then(({data:e})=>{l(e.similarVenues)})},[t,e]),o.a.createElement("div",{className:"sidebar-module"},o.a.createElement("h3",null,"Similar places near by"),o.a.createElement("div",{className:"sidebar-module-body"},i&&i.map(e=>o.a.createElement("div",{key:e.id},o.a.createElement(Q.b,{to:E(e.slug)},e.name)))))});var xt=({venue:e})=>o.a.createElement("div",{className:"sidebar-module"},o.a.createElement("h3",null,"Location"),o.a.createElement("div",{className:"sidebar-module-body"},((e,t=", ")=>e?o.a.createElement("span",null,e.streetAddress,t,rt(e)," ",e.zipcode):"")(e,o.a.createElement("br",null)))),It=({venueId:e,venueSlug:t,favoriteByCurrentUser:a,onUpdateFavoritesStats:n})=>{const r=[{query:Te}],i=(e,a)=>{let r=e.readQuery({query:Ne,variables:{venueSlug:t}});r.venueBySlug.venueStats=a,n(a),e.writeQuery({query:Ne,variables:{venueSlug:t},data:r})},l=Object(We.a)(qe,{onError(e){console.log("error",e)},update:(e,{data:{createUserVenueFavorite:t}})=>{i(e,t)},refetchQueries:r}),s=Object(_.a)(l,1)[0],c=Object(We.a)(Ae,{onError(e){console.log("error",e)},update:(e,{data:{deleteUserVenueFavorite:t}})=>{i(e,t)},refetchQueries:r}),u=Object(_.a)(c,1)[0];return o.a.createElement(o.a.Fragment,null,a?o.a.createElement("span",null,"\u2605\xa0",o.a.createElement("a",{href:"#",onClick:t=>{t.preventDefault(),u({variables:{venueId:e}})}},"Unlike")):o.a.createElement("a",{href:"#",onClick:t=>{t.preventDefault(),s({variables:{venueId:e}})}},"Like"))};const Ct={sectionHeader:{marginBottom:"15px"},columnWrapper:{display:"flex"},mainColumn:{flexGrow:3,maxWidth:"800px"},sideColumm:{flexGrow:1,marginTop:"-20px"}};var Nt=({match:e})=>{const t=e.params.venueSlug,a=Object(r.useState)(null),i=Object(_.a)(a,2),l=i[0],s=i[1],c=Object(r.useState)(""),u=Object(_.a)(c,2),m=u[0],d=u[1],p=e=>{s(Object(n.a)(Object(n.a)({},l),{},{venueStats:Object(n.a)({},e)}))};return t?o.a.createElement(ve.b,{query:Ne,variables:{venueSlug:t}},({loading:e,error:a,data:n})=>e?"Loading...":a?"Error! ".concat(a.message):(s(n.venueBySlug),d((e=>e.venueTypes[0].name||"venue")(n.venueBySlug)),l&&o.a.createElement("div",null,o.a.createElement(jt,{venue:l}),o.a.createElement("div",{className:"mainContainer"},o.a.createElement("div",{className:"mainContent"},o.a.createElement(S.a,{variant:"h5",style:Ct.sectionHeader},l.name),o.a.createElement("div",{style:Ct.columnWrapper},o.a.createElement("div",{style:Ct.mainColumn},o.a.createElement("div",null,"Liked by"," ",o.a.createElement("strong",null,o.a.createElement(ee.a,{value:l.venueStats.favorites,thousandSeparator:!0,displayType:"text"})," ",Ot()("person",l.venueStats.favorites)),". \xa0",L()&&o.a.createElement(It,{venueId:l.id,venueSlug:t,favoriteByCurrentUser:l.venueStats.favoriteByCurrentUser,onUpdateFavoritesStats:p})),o.a.createElement("br",null),l.description&&o.a.createElement("span",null,l.description),"This ",m," is located in ",l.city,","," ",l.state,"."),o.a.createElement("div",{style:Ct.sideColumm},o.a.createElement(xt,{venue:l}),o.a.createElement(St,{venue:l})))))))):o.a.createElement("div",null,"Venue not found.")},Tt=a(263),kt=a(251),wt=a(145),Dt=a(108),$t=a.n(Dt),Vt=Object(wt.a)({palette:{primary:{main:$t.a[500]},background:{default:"#efefef"}},typography:{useNextVariants:!0}}),Ft=a(70),Bt=a.n(Ft),Ut=a(143),Mt=a.n(Ut),qt=a(146),At=a(58),Wt=a.n(At),Lt=a(97),zt=a(262);class Rt extends r.Component{constructor(...e){var t;super(...e),t=this,this.state={login:void 0===this.props.login||this.props.login,email:"",password:"",firstName:"",lastName:"",errorMessage:null},this._update=function(){var e=Object(Lt.a)(Wt.a.mark((function e(t,a){return Wt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.writeData({data:{currentUser:Object(n.a)(Object(n.a)({},a.user),{},{token:a.token})}});case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this._confirm=function(){var e=Object(Lt.a)(Wt.a.mark((function e(a){var n,r,o;return Wt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state.error=null,n=t.state.login?a.login:a.signup,r=n.token,o=n.user,t._saveUserData(r,o),document.location=b;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._saveUserData=(e,t)=>{((e,t)=>{localStorage.setItem("auth-token",e),localStorage.setItem("user-info",JSON.stringify(t))})(e,t)},this._error=function(){var e=Object(Lt.a)(Wt.a.mark((function e({graphQLErrors:a}){return Wt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state.login&&a&&a[0]&&a[0].message?t.setState({errorMessage:a[0].message}):a&&a[0]&&a[0].extensions.exception.errors[0].message&&t.setState({errorMessage:a[0].extensions.exception.errors[0].message});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}componentDidUpdate(e){e.open!==this.props.open&&this.setState({errorMessage:null}),e.login!==this.props.login&&this.setState({login:this.props.login})}render(){const e=this.state,t=e.login,a=e.email,n=e.password,r=e.firstName,i=e.lastName,l=e.errorMessage,s=this.props.classes;return o.a.createElement(P.a,{open:this.props.open,onClose:this.props.toggleDialog,maxWidth:"sm",fullWidth:!0,"aria-labelledby":"form-dialog-title"},o.a.createElement(K.a,{id:"login-dialog-title"},t?"Login":"Sign Up"),o.a.createElement(Y.a,null,l&&o.a.createElement(Z.a,{className:s.dialogMainError},l),o.a.createElement("div",{className:s.dialogMainContent},!t&&o.a.createElement("span",null,o.a.createElement(X.a,{id:"firstName",label:"First name",error:!!l,value:r,onChange:e=>this.setState({firstName:e.target.value}),margin:"normal",fullWidth:!0}),o.a.createElement(X.a,{id:"lastName",label:"Last name",error:!!l,value:i,onChange:e=>this.setState({lastName:e.target.value}),margin:"normal",fullWidth:!0})),o.a.createElement(X.a,{id:"email",label:"Email",error:!!l,value:a,onChange:e=>this.setState({email:e.target.value}),margin:"normal",fullWidth:!0}),o.a.createElement(X.a,{id:"password",label:"Password",error:!!l,type:"password",autoComplete:"current-password",onChange:e=>this.setState({password:e.target.value}),margin:"normal",fullWidth:!0}))),o.a.createElement(zt.a,null,o.a.createElement(G.a,{onClick:()=>this.setState({login:!t,errorMessage:null}),color:"primary",style:{marginRight:"auto"}},t?"need to create an account?":"already have an account?"),o.a.createElement(G.a,{onClick:this.props.toggleDialog,color:"primary"},"Cancel"),o.a.createElement(ve.a,{mutation:t?mt:ut,variables:{email:a,password:n,firstName:r,lastName:i},update:(e,{data:a})=>this._update(e,t?a.login:a.signup),onCompleted:e=>this._confirm(e),onError:e=>this._error(e)},e=>o.a.createElement(G.a,{color:"primary",onClick:e},t?"login":"create account"))))}}var _t=Object(v.f)(Object(H.a)({dialogMainContent:{display:"flex",justifyContent:"center",flexDirection:"column"},dialogMainError:{textAlign:"center"}})(Rt));class Ht extends r.Component{constructor(...e){super(...e),this.state={dialogOpen:!1,login:!0},this.toggleDialog=()=>{this.setState({dialogOpen:!this.state.dialogOpen,login:!0})},this.renderUserInfo=e=>e&&e.id?"Welcome, ".concat(e.firstName):""}componentDidMount(){var e;e=()=>{this.setState({dialogOpen:!0,login:!1})},window.addEventListener("openSignUpModal",()=>e())}render(){const e=this.props.currentUser;return L()?o.a.createElement(S.a,{variant:"button",color:"inherit",className:this.props.className},this.renderUserInfo(e)):o.a.createElement("span",null,o.a.createElement(G.a,{onClick:this.toggleDialog,className:this.props.className,color:"inherit"},"Login"),o.a.createElement(_t,{open:this.state.dialogOpen,login:this.state.login,toggleDialog:this.toggleDialog}))}}var Qt,Gt=(Qt=Object(v.f)(Ht),Object(V.a)(Object($.a)(A,{props:({data:{currentUser:e}})=>({currentUser:e})}))(Qt));class Jt extends r.Component{constructor(...e){super(...e),this.state={anchorEl:null},this.toggleMenu=e=>{this.state.anchorEl?this.setState({anchorEl:null}):this.setState({anchorEl:e.currentTarget})}}render(){const e=this.props.classes;return o.a.createElement("div",{className:e.root},o.a.createElement(te.a,{position:"fixed",style:{background:"transparent",boxShadow:"none"}},o.a.createElement(ae.a,{variant:"dense",className:e.container},o.a.createElement(S.a,{className:e.logoText,variant:"button",color:"inherit"},"KidTrip"),o.a.createElement(S.a,{variant:"h6",color:"inherit",className:e.grow}),o.a.createElement(Gt,{className:e.loginButton}),L()&&o.a.createElement("span",{className:e.menuWrapper},o.a.createElement(oe.a,{onClick:this.toggleMenu,className:e.menuButton,color:"inherit","aria-label":"Menu"},o.a.createElement(Mt.a,null)),o.a.createElement(qt.a,{id:"simple-menu",anchorEl:this.state.anchorEl,open:Boolean(this.state.anchorEl),onClose:this.toggleMenu},o.a.createElement(ge.a,{component:Q.b,to:f,onClick:this.toggleMenu},"Home"),o.a.createElement(ge.a,{component:Q.b,to:b,onClick:this.toggleMenu},"Dashboard"),o.a.createElement(ge.a,{onClick:this.toggleMenu},"My account"),o.a.createElement(ge.a,{onClick:()=>{localStorage.removeItem("auth-token"),localStorage.removeItem("user-info"),this.props.history.push("/")}},"Logout"))))))}}var Pt=Object(v.f)(Jt);const Yt={root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},menuWrapper:{marginLeft:15}},Kt=Object(n.a)(Object(n.a)({},Yt),{},{container:{borderBottom:"1px solid",borderBottomColor:Bt.a[100],backgroundColor:"white"},grow:Object(n.a)(Object(n.a)({},Yt.grow),{},{color:Bt.a[500]}),menuButton:Object(n.a)(Object(n.a)({},Yt.menuButton),{},{color:Bt.a[500]}),loginButton:{color:Bt.a[500]},logoText:{color:Bt.a[500]}});var Zt=Object(v.f)(e=>{const t=j(e.location)?Yt:Kt,a=Object(H.a)(t)(Pt);return o.a.createElement(a,null)});class Xt extends r.Component{render(){const e=this.props,t=e.classes,a=e.location;return o.a.createElement(kt.a,{theme:Vt},o.a.createElement("div",null,o.a.createElement(Tt.a,null),o.a.createElement(Zt,null),!j(a)&&o.a.createElement("div",{className:t.appBarSpacer}),o.a.createElement(v.c,null,o.a.createElement(v.a,{exact:!0,path:f,component:R}),o.a.createElement(v.a,{path:b,component:yt}),o.a.createElement(v.a,{path:y,component:Nt}))))}}var ea=Object(v.f)(Object(H.a)({"@global":{body:{fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:400},".mainContainer":{display:"flex",justifyContent:"center"},".mainContent":{maxWidth:"1200px",flexGrow:"1",margin:"25px",backgroundColor:"#fff",padding:"25px",borderRadius:"8px"}},appBarSpacer:{height:"49px"}})(Xt));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(210);const ta=new c.a,aa={currentUser:Object(n.a)({},(()=>{const e=localStorage.getItem("user-info");return e?JSON.parse(e):{__typename:"User",id:null,firstName:null,lastName:null,email:null}})())},na=Object(g.a)({cache:ta,defaults:aa,resolvers:{Mutation:{updateUserInfo:(e,{id:t,firstName:a,lastName:n,email:r},{cache:o})=>{const i={user:{__typename:"User",id:t,firstName:a,lastName:n,email:r}};return o.writeData({data:i}),null}}}}),ra=localStorage.getItem("auth-token"),oa=new u.a({uri:"http://api.mykidtrip.com",credentials:"same-origin",headers:{authorization:ra?"Bearer ".concat(ra):""}}),ia=new s.a({link:d.a.from([Object(m.a)(({graphQLErrors:e,networkError:t})=>{e&&e.map(({message:e,locations:t,path:a})=>console.log("[GraphQL error]: Message: ".concat(e,", Location: ").concat(t,", Path: ").concat(a))),t&&console.log("[Network error]: ".concat(t))}),na,oa]),cache:new c.a,resolvers:{}});l.a.render(o.a.createElement(Q.a,null,o.a.createElement(p.b,{client:ia},o.a.createElement(ea,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[169,1,2]]]);
//# sourceMappingURL=main.ad65ab49.chunk.js.map