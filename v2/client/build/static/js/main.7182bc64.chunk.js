(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{125:function(e,t,n){},163:function(e,t,n){e.exports=n(203)},173:function(e,t,n){},174:function(e,t,n){},176:function(e,t,n){},177:function(e,t,n){},203:function(e,t,n){"use strict";n.r(t);var a=n(19),r=n(0),o=n.n(r),i=n(14),l=n.n(i),c=n(57),u=n(106),s=n(143),m=n(138),d=n(29),p=n(12),f=n(142),v=n(50),g=n(51),b=n(53),h=n(52),y=n(54),E=n(25),O={home:"/",dashboard:"/dashboard/:section?",dashboardPath:function(e){return"/dashboard/".concat(e)},venue:"/venue/:venueSlug",venuePath:function(e){return"/venue/".concat(e)},validatePageSection:function(e,t,n){return Object.values(t).includes(e)?e:n}},S=function(e){return e.pathname===O.home},j=n(145),x=function(e,t){return{container:{display:"flex",flexWrap:"wrap",flexDirection:"column",justifyContent:"center",alignItems:"center",background:"linear-gradient(rgba(0, 0, 0, 0.5),rgba(0, 0, 0, 0.5)),url(/images/".concat(e,") 50% 50% no-repeat"),backgroundSize:"cover",height:t},headerText:{color:"#ffffff"}}},N=x("family-biking-cmp.jpg","700px"),I=function(){return o.a.createElement("div",{style:N.container},o.a.createElement(j.a,{variant:"h2",style:N.headerText},o.a.createElement("strong",null,"Experience")," childhood, again."))},C=(n(173),function(e){var t=e.title,n=e.icon,a=e.text,r={background:"url(/images/icons/".concat(n,".png) 0% 0% / 60px 60px no-repeat"),width:"60px",height:"60px"};return o.a.createElement("div",{className:"value-prop-section"},o.a.createElement("div",{className:"value-prop-title"},t),o.a.createElement("div",{className:"value-prop-icon",style:r}),o.a.createElement("div",{className:"value-prop-text"},a))}),k=(n(174),{title:"Discover",icon:"discover",text:"Find out about great local places to visit with your family. From restaurants, to museums, \n\tparks and playgrounds, make the most of your time!"}),w={title:"Track",icon:"track",text:"Had a great time sharing a meal with your family or enjoyed a hiking trail? Jot it down to build your \n\troster of go-to places for your trips."},T={title:"Share",icon:"share",text:"Share your favorite places to visit with friends and family, and hear about what others are \n\tenjoying, for great new ideas."},D=function(){return o.a.createElement("div",{className:"value-prop-container"},o.a.createElement(C,k),o.a.createElement(C,w),o.a.createElement(C,T))},$=n(231),B=n(144),F=n(21),V=n(22),U=n.n(V);function M(){var e=Object(F.a)(["\n\tquery {\n\t\t\tcurrentUser @client {\n\t\t\t\t\tid\n\t\t\t\t\tfirstName\n\t\t\t\t\tlastName\n\t\t\t}\n\t}\n"]);return M=function(){return e},e}var A=U()(M()),q=function(){return!!localStorage.getItem("auth-token")},L=function(e,t){localStorage.setItem("auth-token",e),localStorage.setItem("user-info",JSON.stringify(t))},W=(n(176),n(177),function(){return o.a.createElement("div",null,!q()&&o.a.createElement("div",null,o.a.createElement("button",{className:"form-button homepage-signup-button",onClick:function(){return function(){var e=new Event("openSignUpModal");window.dispatchEvent(e)}()}},"Get Started")))}),z=function(){return o.a.createElement("div",null,o.a.createElement(I,null),o.a.createElement(D,null),o.a.createElement(W,null))},R=n(15),_=n(9),H=n(32),P=n(241),Q=n(252),G=n(86),J=n(257),Y=n(239),K=n(238),Z=n(240),X=n(260),ee=n(92),te=n(235),ne=n(236),ae=n(133),re=n.n(ae),oe=n(237),ie=n(139);function le(){var e=Object(F.a)(["\n\tquery ($limit: Int, $query: String) {\n\t\tcities(first: $limit, query: $query) {\n\t\t\tid\n\t\t\tname\n\t\t\tstate\n\t\t}\n\t}\n"]);return le=function(){return e},e}var ce=U()(le()),ue=n(261),se=n(232),me={container:{position:"relative",width:"500px"},input:{border:"1px solid #ccc",outline:"none",width:"300px",padding:"20px",fontSize:"17px"},suggestionsContainer:{position:"absolute",width:"300px",top:62,left:0,border:"1px solid #efefef"},suggestionItem:{width:"100%",padding:"10px"},formControl:{minWidth:"500px",marginTop:"16px",marginBottom:"8px",height:"16px"}},de=Object($.b)((function(e){var t=e.client,n=e.onCitySelected,a=e.isMulti,i=e.fieldLabel,l=e.placeholder,c=Object(r.useState)(""),u=Object(R.a)(c,2),s=u[0],m=u[1],d=Object(r.useState)(a?[]:{}),p=Object(R.a)(d,2),f=p[0],v=p[1],g=Object(r.useState)([]),b=Object(R.a)(g,2),h=b[0],y=b[1];Object(r.useEffect)((function(){s&&s.length>=3?function(e){return t.query({query:ce,variables:{limit:10,query:e}})}(s).then((function(e){var t=e.data;y(t.cities.map((function(e){return{value:e.id,label:"".concat(e.name,", ").concat(e.state)}})))})):y([])}),[s,t]);return o.a.createElement("div",{style:me.container},o.a.createElement(se.a,{style:me.formControl},o.a.createElement(ue.a,{shrink:!0,htmlFor:"age-simple"},i||"City")),o.a.createElement(ie.a,{value:f,defaultValue:null,onChange:function(e){v(e),n(e)},options:h,onInputChange:function(e){m(e)},placeholder:l||"Type in name of city",isClearable:!0,isMulti:!!a,menuIsOpen:h&&h.length,escapeClearsValue:!0}))})),pe=n(255),fe=n(259),ve=n(94);function ge(){var e=Object(F.a)(["\n  query($cityIds: String, $venueTypeIds: String, $sort: String, $first: Int) {\n    venues(\n      cityIds: $cityIds\n      venueTypeIds: $venueTypeIds\n      sort: $sort\n      first: $first\n    ) {\n      id\n      createdAt\n      name\n      slug\n      description\n      streetAddress\n      zipcode\n      city\n      state\n      lat\n      lng\n      creator {\n        id\n        firstName\n        lastName\n      }\n      venueTypes {\n        id\n        name\n        image\n      }\n    }\n  }\n"]);return ge=function(){return e},e}function be(){var e=Object(F.a)(["\n  query($venueId: ID!, $limit: Int, $radius: Int) {\n    similarVenues(id: $venueId, first: $limit, radius: $radius) {\n      id\n      name\n      slug\n      streetAddress\n      zipcode\n      city\n    }\n  }\n"]);return be=function(){return e},e}function he(){var e=Object(F.a)(["\n  query {\n    venueTypes {\n      id\n      name\n      image\n    }\n  }\n"]);return he=function(){return e},e}function ye(){var e=Object(F.a)(["\n  query {\n    me {\n      venues {\n        ...VenueDetails\n      }\n      favoriteVenues {\n        ...VenueDetails\n      }\n    }\n  }\n  ","\n"]);return ye=function(){return e},e}function Ee(){var e=Object(F.a)(["\n  query($venueSlug: String!) {\n    venueBySlug(slug: $venueSlug) {\n      ...VenueDetails\n      ...VenueStats\n    }\n  }\n  ","\n  ","\n"]);return Ee=function(){return e},e}function Oe(){var e=Object(F.a)(["\n  query($venueId: ID!) {\n    venue(id: $venueId) {\n      ...VenueDetails\n      ...VenueStats\n    }\n  }\n  ","\n  ","\n"]);return Oe=function(){return e},e}function Se(){var e=Object(F.a)(["\n  query($venueId: ID!) {\n    venue(id: $venueId) {\n      ...VenueDetails\n    }\n  }\n  ","\n"]);return Se=function(){return e},e}function je(){var e=Object(F.a)(["\n  fragment VenueStats on Venue {\n    venueStats {\n      favorites\n      favoriteByCurrentUser\n    }\n  }\n"]);return je=function(){return e},e}function xe(){var e=Object(F.a)(["\n  fragment VenueDetails on Venue {\n    id\n    name\n    slug\n    description\n    streetAddress\n    zipcode\n    city\n    state\n    lat\n    lng\n    venueTypes {\n      id\n      name\n      image\n    }\n  }\n"]);return xe=function(){return e},e}var Ne=U()(xe()),Ie=U()(je()),Ce=(U()(Se(),Ne),U()(Oe(),Ne,Ie),U()(Ee(),Ne,Ie)),ke=U()(ye(),Ne),we=U()(he()),Te=U()(be()),De=U()(ge()),$e={formControl:{minWidth:"500px",marginTop:"16px",marginBottom:"8px"}},Be=function(e){var t=e.onVenueTypeSelected,n=Object(r.useState)(""),a=Object(R.a)(n,2),i=a[0],l=a[1];return o.a.createElement(ve.b,{query:we},(function(e){var n=e.loading,a=e.error,r=e.data;if(n)return"Loading...";if(a)return"Error! ".concat(a.message);var c=r.venueTypes;return o.a.createElement(se.a,{style:$e.formControl},o.a.createElement(ue.a,{htmlFor:"age-simple"},"Venue Type"),o.a.createElement(pe.a,{value:i,onChange:function(e){return n=e.target.value,l(n),void t(n);var n},inputProps:{name:"type",id:"venue-type"}},c.map((function(e){return o.a.createElement(fe.a,{key:e.id,value:e.id},e.name)}))))}))};function Fe(){var e=Object(F.a)(["\n  mutation DeleteUserVenueFavorite($venueId: Int!) {\n    deleteUserVenueFavorite(venueId: $venueId) {\n      favorites\n      favoriteByCurrentUser\n    }\n  }\n"]);return Fe=function(){return e},e}function Ve(){var e=Object(F.a)(["\n  mutation CreateUserVenueFavorite($venueId: Int!) {\n    createUserVenueFavorite(venueId: $venueId) {\n      favorites\n      favoriteByCurrentUser\n    }\n  }\n"]);return Ve=function(){return e},e}function Ue(){var e=Object(F.a)(["\n  mutation CreateVenueMutation(\n    $name: String!\n    $streetAddress: String!\n    $zipcode: Int!\n    $cityId: Int!\n    $typeId: Int!\n  ) {\n    createVenue(\n      name: $name\n      streetAddress: $streetAddress\n      zipcode: $zipcode\n      city: { id: $cityId }\n      venueType: { id: $typeId }\n    ) {\n      id\n      name\n      streetAddress\n      venueTypes {\n        name\n      }\n    }\n  }\n"]);return Ue=function(){return e},e}var Me=U()(Ue()),Ae=U()(Ve()),qe=U()(Fe()),Le=n(42),We={appBar:{position:"relative"},title:{margin:"0 auto"},body:{margin:"0 auto"},input:{minWidth:"500px"}},ze={name:"",type:{id:null},streetAddress:"",zipcode:"",lat:"",lng:"",city:{}},Re=function(e){var t=e.open,n=e.toggleDialog,i=e.onCreatedVenue,l=Object(Le.a)(Me,{onError:function(e){console.log("error",e)},onCompleted:function(e){i()},refetchQueries:[{query:ke}],awaitRefetchQueries:!0}),c=Object(R.a)(l,1)[0],u=Object(r.useState)(Object(a.a)({},ze)),s=Object(R.a)(u,2),m=s[0],d=s[1],p=Object(r.useState)("Please enter information about a venue"),f=Object(R.a)(p,2),v=f[0],g=f[1],b=function(e){return function(t){d(Object(a.a)({},m,Object(G.a)({},e,t.target.value)))}};return o.a.createElement(J.a,{open:t,onClose:n,fullScreen:!0,"aria-labelledby":"form-dialog-title"},o.a.createElement(te.a,{style:We.appBar},o.a.createElement(ne.a,null,o.a.createElement(oe.a,{edge:"start",color:"inherit",onClick:n,"aria-label":"close"},o.a.createElement(re.a,null)))),o.a.createElement(K.a,{style:We.title},"Add New Destination"),o.a.createElement(Y.a,{style:We.body},o.a.createElement(Z.a,null,v),o.a.createElement(X.a,{id:"venue-name",label:"Venue name",value:m.name,onChange:b("name"),margin:"normal",style:We.input}),o.a.createElement("br",null),o.a.createElement(Be,{onVenueTypeSelected:function(e){d(Object(a.a)({},m,{type:{id:e}}))}}),o.a.createElement("br",null),o.a.createElement(X.a,{id:"venue-street-address",name:"street-address",label:"Street address",value:m.streetAddress,onChange:b("streetAddress"),margin:"normal",autoComplete:"shipping street-address",style:We.input}),o.a.createElement(de,{onCitySelected:function(e){e&&e.value?d(Object(a.a)({},m,{city:{id:e.value}})):d(Object(a.a)({},m,{city:{}}))}}),o.a.createElement(ee.a,{customInput:X.a,id:"venue-zipcode",name:"zipcode",label:"Zipcode",value:m.zipcode,onChange:b("zipcode"),margin:"normal",style:We.input,autoComplete:"postal-code",format:"#####"}),o.a.createElement("div",null,o.a.createElement(P.a,{color:"primary",onClick:function(){!function(e){var t=e.name,n=e.type,a=e.streetAddress,r=e.city,o=e.zipcode,i={name:!1,type:!1,streetAddress:!1,city:!1,zipcode:!1};return t&&t.length>=2&&(i.name=!0),n&&n.id&&(i.type=!0),a&&a.length>=2&&(i.streetAddress=!0),r&&r.id&&(i.city=!0),o&&!isNaN(parseInt(o))&&(i.zipcode=!0),-1===Object.values(i).indexOf(!1)}(m)?g("Please enter valid venue information"):c({variables:{name:m.name,typeId:m.type.id,streetAddress:m.streetAddress,zipcode:parseInt(m.zipcode),cityId:m.city.id}}).then((function(e){d(Object(a.a)({},ze)),n()}))}},"Create venue"))))},_e=n(134),He=n.n(_e),Pe=n(254),Qe=n(243),Ge=Object(_.a)({appBar:{boxShadow:"none",float:"left",width:"300px"},tabIndicator:{backgroundColor:"#ffffff"}})((function(e){var t=e.classes,n=e.venues,a=e.venueTypeFilter,r=e.onSetVenueTypeFilter;return o.a.createElement(o.a.Fragment,null,o.a.createElement(He.a,{position:"static",className:t.appBar},o.a.createElement(Pe.a,{value:a,onChange:function(e,t){r(t)},classes:{indicator:t.tabIndicator},orientation:"vertical",variant:"scrollable",scrollButtons:"auto"},o.a.createElement(Qe.a,{label:"all",value:"all"}),function(e){for(var t={},n=0;n<e.length;n++)e[n].venueTypes&&e[n].venueTypes.length&&(t[e[n].venueTypes[0].name]?t[e[n].venueTypes[0].name].venues.push(e[n]):t[e[n].venueTypes[0].name]={type:{id:e[n].venueTypes[0].id,name:e[n].venueTypes[0].name},venues:[e[n]]});return Object.keys(t)}(n).sort().map((function(e,t){return o.a.createElement(Qe.a,{label:e,value:e,key:t})})))))})),Je=n(244),Ye=n(245),Ke=n(246),Ze=n(247),Xe=n(248),et=n(249),tt=n(250),nt=n(251),at=function(e){var t="".concat(e.streetAddress,", ").concat(e.city,", ").concat(e.state," ").concat(e.zipcode);return"https://maps.google.com/?q=".concat(encodeURIComponent(t))},rt=function(e){return"".concat(e.city,", ").concat(e.state)},ot=Object(_.a)({"@global":{".venueItem":{border:"1px solid #eee",borderRadius:"8px",marginTop:"5px",marginBottom:"5px",padding:"15px",width:"49%",display:"inline-block","&:nth-child(odd)":{marginRight:"10px"}},".venueItemTitle":{display:"block",fontSize:"18px",fontWeight:500,lineHeight:1.6,color:"#333333",textDecoration:"none","&:hover":{textDecoration:"underline"}},".venueItemDescription":{},".venueItemTypeBadge":{display:"inline-block",padding:"1px 5px",backgroundColor:"#2196f3",color:"#fff",borderRadius:"3px",height:"22px"},".venueItemTypeBadgeText":{marginLeft:"20px",marginTop:"3px",textTransform:"uppercase",fontSize:"11px",fontWeight:600,minWidth:"75px",textAlign:"center"},".venueItemLocation":{textTransform:"uppercase",fontSize:"11px",fontWeight:600,textDecoration:"none",float:"right",marginTop:"4px",color:"#666"},".venueIcon":{float:"left",width:"15px",height:"auto",marginRight:"5px",position:"relative",top:"2px"},".venueUnlike":{float:"right"}}})((function(e){var t=e.venue,n=e.showDeleteFavoriteButton,a=e.onDeleteFavoriteCallback,r=Object(Le.a)(qe,{onError:function(e){console.log("error",e)},update:function(e,t){var n=t.data.deleteUserVenueFavorite;l(e,n)},onCompleted:function(){a()},refetchQueries:[{query:ke}],awaitRefetchQueries:!0}),i=Object(R.a)(r,1)[0],l=function(e,n){try{var a=e.readQuery({query:Ce,variables:{venueSlug:t.slug}});a.venueBySlug.venueStats=n,e.writeQuery({query:Ce,variables:{venueSlug:t.slug},data:a})}catch(r){}};return o.a.createElement("div",{className:"venueItem"},n&&o.a.createElement("button",{onClick:function(){i({variables:{venueId:t.id}})},className:"venueUnlike"},"Unlike"),o.a.createElement(H.b,{to:O.venuePath(t.slug),className:"venueItemTitle"},t.name),o.a.createElement("div",{className:"venueItemDescription"},o.a.createElement("div",{className:"venueItemTypeBadge"},function(e,t){var n;switch(e.venueTypes[0].name){case"restaurant":n=o.a.createElement(Je.a,{className:t});break;case"museum":n=o.a.createElement(Ye.a,{className:t});break;case"zoo":n=o.a.createElement(Ke.a,{className:t});break;case"hiking trail":n=o.a.createElement(Ze.a,{className:t});break;case"outdoor park":n=o.a.createElement(Xe.a,{className:t});break;case"camp site":n=o.a.createElement(et.a,{className:t});break;case"outdoor playground":n=o.a.createElement(tt.a,{className:t});break;default:n=o.a.createElement(nt.a,{className:t})}return n}(t,"venueIcon"),o.a.createElement("div",{className:"venueItemTypeBadgeText"},t.venueTypes&&t.venueTypes.length?"".concat(t.venueTypes[0].name):"")),o.a.createElement("a",{href:at(t),target:"_blank",rel:"noopener noreferrer",className:"venueItemLocation"},rt(t))))})),it=Object(_.a)({"@global":{".venueList":{marginLeft:"320px"}}})(Object($.b)((function(e){var t=e.client,n=e.currentDashboardSection,a=e.isFavoritesDashboardSection,i=e.externalTriggerVenueRefresh,l=Object(r.useState)("all"),c=Object(R.a)(l,2),u=c[0],s=c[1],m=Object(r.useState)([]),d=Object(R.a)(m,2),p=d[0],f=d[1],v=Object(r.useState)(!0),g=Object(R.a)(v,2),b=g[0],h=g[1];Object(r.useEffect)((function(){t.query({query:ke}).then((function(e){var t=e.data;f(a?t.me.favoriteVenues:t.me.venues)})),s("all")}),[n,b,i,a,t]);var y=function(){h(!b)};return o.a.createElement(r.Fragment,null,o.a.createElement(Ge,{venues:p,onSetVenueTypeFilter:s,venueTypeFilter:u}),o.a.createElement("div",{className:"venueList"},p.filter((function(e){return"all"===u||e.venueTypes[0].name===u})).map((function(e){return o.a.createElement(ot,{key:e.id,venue:e,showDeleteFavoriteButton:a,onDeleteFavoriteCallback:y})}))))}))),lt=Object(_.a)({"@global":{".feedItem":{borderBottom:"1px solid #eee",marginTop:"5px",marginBottom:"5px",padding:"15px"},".feedItemTitle":{fontWeight:600,color:"#000",textDecoration:"none",fontSize:"15px"},".feedItemSubtitle":{fontSize:"12px"}}})((function(e){var t,n=e.venue;return o.a.createElement("div",{className:"feedItem"},o.a.createElement(H.b,{to:O.venuePath(n.slug),className:"feedItemTitle"},n.name),o.a.createElement("div",{className:"feedItemSubtitle"},"in ",rt(n),o.a.createElement("br",null),"added ",function(e){var t=new Date(e),n=((new Date).getTime()-t.getTime())/1e3;return n<=60?"now":n<90?Math.round(n/60)+" minute ago":n<=3600?Math.round(n/60)+" minutes ago":n<5400?Math.round(n/3600)+" hour ago":n<=86400?Math.round(n/3600)+" hours ago":"on "+t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}(n.createdAt)," by ",(t=n.creator)&&t.firstName&&t.lastName?"".concat(t.firstName," ").concat(t.lastName[0],"."):""))})),ct=function(e){var t=e.onFeedConfigurationUpdated;return o.a.createElement("div",null,o.a.createElement(de,{onCitySelected:function(e){t({cities:e})},fieldLabel:"Filter feed by city",placeholder:"e.g.: San Francisco, CA",isMulti:!0}))},ut=Object(_.a)({"@global":{".feedContainer":{maxWidth:"50%",minWidth:"400px"}}})(Object($.b)((function(e){var t=e.client,n=Object(r.useState)([]),i=Object(R.a)(n,2),l=i[0],c=i[1],u=Object(r.useState)({cityIds:null,venueTypeIds:null,sort:"DESC",first:25}),s=Object(R.a)(u,2),m=s[0],d=s[1];Object(r.useEffect)((function(){t.query({query:De,variables:Object(a.a)({},m)}).then((function(e){var t=e.data;c(t.venues)}))}),[t,m]);return o.a.createElement("div",{className:"feedContainer"},o.a.createElement(ct,{onFeedConfigurationUpdated:function(e){e&&(e.cities?d(Object(a.a)({},m,{cityIds:e.cities.map((function(e){return e.value})).join(",")})):d(Object(a.a)({},m,{cityIds:null})))}}),l.map((function(e){return o.a.createElement(lt,{key:e.id,venue:e})})))}))),st={FEED:"feed",FOLLOWED_DESTINATIONS:"followed-destinations",MY_DESTINATIONS:"my-destinations",FAVORITES:"favorites"},mt=Object(_.a)({"@global":{".sectionHeader":{marginBottom:"30px",display:"flex"},".sectionHeaderTitle":{flexGrow:2,maxWidth:"250px",cursor:"pointer",textDecoration:"none",color:"#666",textAlign:"center",textTransform:"uppercase",borderRadius:"8px",margin:"0px 10px",fontSize:"14px",fontWeight:600,lineHeight:2.5,letterSpacing:"1.3px",border:"1px solid #eee"},".sectionHeaderTitleSelected":{backgroundColor:"#f9f8f8"},".venueList":{marginLeft:"320px"}}})((function(e){var t=e.match,n=O.validatePageSection(t.params.section,st,st.FEED),a=Object(r.useState)(!1),i=Object(R.a)(a,2),l=i[0],c=i[1],u=Object(r.useState)(!0),s=Object(R.a)(u,2),m=s[0],d=s[1],p=function(){c(!l)},f=function(e,t){return o.a.createElement(H.b,{to:O.dashboardPath(t),className:"sectionHeaderTitle ".concat(n===t?"sectionHeaderTitleSelected":"")},e)};return o.a.createElement("div",{className:"mainContainer"},o.a.createElement("div",{className:"mainContent"},o.a.createElement("div",{className:"sectionHeader"},f("Feed",st.FEED),f("My destinations",st.MY_DESTINATIONS),f("Favorite destinations",st.FAVORITES),o.a.createElement(P.a,{variant:"outlined",style:{marginLeft:"auto"},onClick:p},o.a.createElement(Q.a,null),"Add Destination"),o.a.createElement(Re,{open:l,toggleDialog:p,onCreatedVenue:function(){return d(!m)}})),n===st.FEED?o.a.createElement(ut,null):o.a.createElement(it,{currentDashboardSection:n,isFavoritesDashboardSection:n===st.FAVORITES,externalTriggerVenueRefresh:m})))})),dt=n(136),pt=n.n(dt),ft=function(e){var t=e.venue,n=x(function(e){return e.venueTypes[0].image||"restaurant-header-cmp.jpg"}(t),"300px");return o.a.createElement("div",{style:n.container},o.a.createElement(j.a,{variant:"h2",style:n.headerText},o.a.createElement("strong",null,t.name)))},vt=(n(125),Object($.b)((function(e){var t=e.client,n=e.venue,a=Object(r.useState)([]),i=Object(R.a)(a,2),l=i[0],c=i[1];return Object(r.useEffect)((function(){t.query({query:Te,variables:{venueId:n.id,limit:5,radius:10}}).then((function(e){var t=e.data;c(t.similarVenues)}))}),[n,t]),o.a.createElement("div",{className:"sidebar-module"},o.a.createElement("h3",null,"Similar places near by"),o.a.createElement("div",{className:"sidebar-module-body"},l&&l.map((function(e){return o.a.createElement("div",{key:e.id},o.a.createElement(H.b,{to:O.venuePath(e.slug)},e.name))}))))}))),gt=function(e){var t=e.venue;return o.a.createElement("div",{className:"sidebar-module"},o.a.createElement("h3",null,"Location"),o.a.createElement("div",{className:"sidebar-module-body"},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:", ";return e?o.a.createElement("span",null,e.streetAddress,t,rt(e)," ",e.zipcode):""}(t,o.a.createElement("br",null))))},bt=function(e){var t=e.venueId,n=e.venueSlug,a=e.favoriteByCurrentUser,r=e.onUpdateFavoritesStats,i=[{query:ke}],l=function(e,t){var a=e.readQuery({query:Ce,variables:{venueSlug:n}});a.venueBySlug.venueStats=t,r(t),e.writeQuery({query:Ce,variables:{venueSlug:n},data:a})},c=Object(Le.a)(Ae,{onError:function(e){console.log("error",e)},update:function(e,t){var n=t.data.createUserVenueFavorite;l(e,n)},refetchQueries:i}),u=Object(R.a)(c,1)[0],s=Object(Le.a)(qe,{onError:function(e){console.log("error",e)},update:function(e,t){var n=t.data.deleteUserVenueFavorite;l(e,n)},refetchQueries:i}),m=Object(R.a)(s,1)[0];return o.a.createElement(o.a.Fragment,null,a?o.a.createElement("span",null,"\u2605\xa0",o.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),m({variables:{venueId:t}})}},"Unlike")):o.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),u({variables:{venueId:t}})}},"Like"))},ht={sectionHeader:{marginBottom:"15px"},columnWrapper:{display:"flex"},mainColumn:{flexGrow:3,maxWidth:"800px"},sideColumm:{flexGrow:1,marginTop:"-20px"}},yt=function(e){var t=e.match.params.venueSlug,n=Object(r.useState)(null),i=Object(R.a)(n,2),l=i[0],c=i[1],u=Object(r.useState)(""),s=Object(R.a)(u,2),m=s[0],d=s[1],p=function(e){c(Object(a.a)({},l,{venueStats:Object(a.a)({},e)}))};return t?o.a.createElement(ve.b,{query:Ce,variables:{venueSlug:t}},(function(e){var n=e.loading,a=e.error,r=e.data;return n?"Loading...":a?"Error! ".concat(a.message):(c(r.venueBySlug),d(function(e){return e.venueTypes[0].name||"venue"}(r.venueBySlug)),l&&o.a.createElement("div",null,o.a.createElement(ft,{venue:l}),o.a.createElement("div",{className:"mainContainer"},o.a.createElement("div",{className:"mainContent"},o.a.createElement(j.a,{variant:"h5",style:ht.sectionHeader},l.name),o.a.createElement("div",{style:ht.columnWrapper},o.a.createElement("div",{style:ht.mainColumn},o.a.createElement("div",null,"Liked by"," ",o.a.createElement("strong",null,o.a.createElement(ee.a,{value:l.venueStats.favorites,thousandSeparator:!0,displayType:"text"})," ",pt()("person",l.venueStats.favorites)),". \xa0",q()&&o.a.createElement(bt,{venueId:l.id,venueSlug:t,favoriteByCurrentUser:l.venueStats.favoriteByCurrentUser,onUpdateFavoritesStats:p})),o.a.createElement("br",null),l.description&&o.a.createElement("span",null,l.description),"This ",m," is located in ",l.city,","," ",l.state,"."),o.a.createElement("div",{style:ht.sideColumm},o.a.createElement(gt,{venue:l}),o.a.createElement(vt,{venue:l})))))))})):o.a.createElement("div",null,"Venue not found.")},Et=n(258),Ot=n(242),St=n(140),jt=n(103),xt=n.n(jt),Nt=Object(St.a)({palette:{primary:{main:xt.a[500]},background:{default:"#efefef"}},typography:{useNextVariants:!0}}),It=n(75),Ct=n.n(It),kt=n(137),wt=n.n(kt),Tt=n(141),Dt=n(95),$t=n.n(Dt);function Bt(){var e=Object(F.a)(["\n    mutation LoginMutation($email: String!, $password: String!) {\n        login(email: $email, password: $password) {\n            token,\n            user {\n                id,\n                firstName,\n                lastName,\n                email\n            }\n        }\n    }\n"]);return Bt=function(){return e},e}function Ft(){var e=Object(F.a)(["\n    mutation SignupMutation($email: String!, $password: String!, $firstName: String!, $lastName: String!) {\n        signup(email: $email, password: $password, firstName: $firstName, lastName: $lastName) {\n            token,\n            user {\n                id,\n                firstName,\n                lastName,\n                email\n            }\n        }\n    }\n"]);return Ft=function(){return e},e}var Vt,Ut=U()(Ft()),Mt=U()(Bt()),At=n(253),qt=function(e){function t(){var e,n;Object(v.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(b.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={login:void 0===n.props.login||n.props.login,email:"",password:"",firstName:"",lastName:"",errorMessage:null},n._update=function(e,t){return $t.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:e.writeData({data:{currentUser:Object(a.a)({},t.user,{token:t.token})}});case 1:case"end":return n.stop()}}))},n._confirm=function(e){var t,a,r;return $t.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:n.state.error=null,t=n.state.login?e.login:e.signup,a=t.token,r=t.user,n._saveUserData(a,r),document.location=O.dashboard;case 4:case"end":return o.stop()}}))},n._saveUserData=function(e,t){L(e,t)},n._error=function(e){var t;return $t.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:t=e.graphQLErrors,n.state.login&&t&&t[0]&&t[0].message?n.setState({errorMessage:t[0].message}):t&&t[0]&&t[0].extensions.exception.errors[0].message&&n.setState({errorMessage:t[0].extensions.exception.errors[0].message});case 2:case"end":return a.stop()}}))},n}return Object(y.a)(t,e),Object(g.a)(t,[{key:"componentDidUpdate",value:function(e){e.open!==this.props.open&&this.setState({errorMessage:null}),e.login!==this.props.login&&this.setState({login:this.props.login})}},{key:"render",value:function(){var e=this,t=this.state,n=t.login,a=t.email,r=t.password,i=t.firstName,l=t.lastName,c=t.errorMessage,u=this.props.classes;return o.a.createElement(J.a,{open:this.props.open,onClose:this.props.toggleDialog,maxWidth:"sm",fullWidth:!0,"aria-labelledby":"form-dialog-title"},o.a.createElement(K.a,{id:"login-dialog-title"},n?"Login":"Sign Up"),o.a.createElement(Y.a,null,c&&o.a.createElement(Z.a,{className:u.dialogMainError},c),o.a.createElement("div",{className:u.dialogMainContent},!n&&o.a.createElement("span",null,o.a.createElement(X.a,{id:"firstName",label:"First name",error:!!c,value:i,onChange:function(t){return e.setState({firstName:t.target.value})},margin:"normal",fullWidth:!0}),o.a.createElement(X.a,{id:"lastName",label:"Last name",error:!!c,value:l,onChange:function(t){return e.setState({lastName:t.target.value})},margin:"normal",fullWidth:!0})),o.a.createElement(X.a,{id:"email",label:"Email",error:!!c,value:a,onChange:function(t){return e.setState({email:t.target.value})},margin:"normal",fullWidth:!0}),o.a.createElement(X.a,{id:"password",label:"Password",error:!!c,type:"password",autoComplete:"current-password",onChange:function(t){return e.setState({password:t.target.value})},margin:"normal",fullWidth:!0}))),o.a.createElement(At.a,null,o.a.createElement(P.a,{onClick:function(){return e.setState({login:!n,errorMessage:null})},color:"primary",style:{marginRight:"auto"}},n?"need to create an account?":"already have an account?"),o.a.createElement(P.a,{onClick:this.props.toggleDialog,color:"primary"},"Cancel"),o.a.createElement(ve.a,{mutation:n?Mt:Ut,variables:{email:a,password:r,firstName:i,lastName:l},update:function(t,a){var r=a.data;return e._update(t,n?r.login:r.signup)},onCompleted:function(t){return e._confirm(t)},onError:function(t){return e._error(t)}},(function(e){return o.a.createElement(P.a,{color:"primary",onClick:e},n?"login":"create account")}))))}}]),t}(r.Component),Lt=Object(E.f)(Object(_.a)({dialogMainContent:{display:"flex",justifyContent:"center",flexDirection:"column"},dialogMainError:{textAlign:"center"}})(qt)),Wt=function(e){function t(){var e,n;Object(v.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(b.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={dialogOpen:!1,login:!0},n.toggleDialog=function(){n.setState({dialogOpen:!n.state.dialogOpen,login:!0})},n.renderUserInfo=function(e){return e&&e.id?"Welcome, ".concat(e.firstName):""},n}return Object(y.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e,t=this;e=function(){t.setState({dialogOpen:!0,login:!1})},window.addEventListener("openSignUpModal",(function(){return e()}))}},{key:"render",value:function(){var e=this.props.currentUser;return q()?o.a.createElement(j.a,{variant:"button",color:"inherit",className:this.props.className},this.renderUserInfo(e)):o.a.createElement("span",null,o.a.createElement(P.a,{onClick:this.toggleDialog,className:this.props.className,color:"inherit"},"Login"),o.a.createElement(Lt,{open:this.state.dialogOpen,login:this.state.login,toggleDialog:this.toggleDialog}))}}]),t}(r.Component),zt=(Vt=Object(E.f)(Wt),Object(B.a)(Object($.a)(A,{props:function(e){return{currentUser:e.data.currentUser}}}))(Vt)),Rt=function(e){function t(){var e,n;Object(v.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(b.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={anchorEl:null},n.toggleMenu=function(e){n.state.anchorEl?n.setState({anchorEl:null}):n.setState({anchorEl:e.currentTarget})},n}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement("div",{className:t.root},o.a.createElement(te.a,{position:"fixed",style:{background:"transparent",boxShadow:"none"}},o.a.createElement(ne.a,{variant:"dense",className:t.container},o.a.createElement(j.a,{className:t.logoText,variant:"button",color:"inherit"},"KidTrip"),o.a.createElement(j.a,{variant:"h6",color:"inherit",className:t.grow}),o.a.createElement(zt,{className:t.loginButton}),q()&&o.a.createElement("span",{className:t.menuWrapper},o.a.createElement(oe.a,{onClick:this.toggleMenu,className:t.menuButton,color:"inherit","aria-label":"Menu"},o.a.createElement(wt.a,null)),o.a.createElement(Tt.a,{id:"simple-menu",anchorEl:this.state.anchorEl,open:Boolean(this.state.anchorEl),onClose:this.toggleMenu},o.a.createElement(fe.a,{component:H.b,to:O.home,onClick:this.toggleMenu},"Home"),o.a.createElement(fe.a,{component:H.b,to:O.dashboard,onClick:this.toggleMenu},"Dashboard"),o.a.createElement(fe.a,{onClick:this.toggleMenu},"My account"),o.a.createElement(fe.a,{onClick:function(){localStorage.removeItem("auth-token"),localStorage.removeItem("user-info"),e.props.history.push("/")}},"Logout"))))))}}]),t}(r.Component),_t=Object(E.f)(Rt),Ht={root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},menuWrapper:{marginLeft:15}},Pt=Object(a.a)({},Ht,{container:{borderBottom:"1px solid",borderBottomColor:Ct.a[100],backgroundColor:"white"},grow:Object(a.a)({},Ht.grow,{color:Ct.a[500]}),menuButton:Object(a.a)({},Ht.menuButton,{color:Ct.a[500]}),loginButton:{color:Ct.a[500]},logoText:{color:Ct.a[500]}}),Qt=Object(E.f)((function(e){var t=S(e.location)?Ht:Pt,n=Object(_.a)(t)(_t);return o.a.createElement(n,null)})),Gt=function(e){function t(){return Object(v.a)(this,t),Object(b.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.location;return o.a.createElement(Ot.a,{theme:Nt},o.a.createElement("div",null,o.a.createElement(Et.a,null),o.a.createElement(Qt,null),!S(n)&&o.a.createElement("div",{className:t.appBarSpacer}),o.a.createElement(E.c,null,o.a.createElement(E.a,{exact:!0,path:O.home,component:z}),o.a.createElement(E.a,{path:O.dashboard,component:mt}),o.a.createElement(E.a,{path:O.venue,component:yt}))))}}]),t}(r.Component),Jt=Object(E.f)(Object(_.a)({"@global":{body:{fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:400},".mainContainer":{display:"flex",justifyContent:"center"},".mainContent":{maxWidth:"1200px",flexGrow:"1",margin:"25px",backgroundColor:"#fff",padding:"25px",borderRadius:"8px"}},appBarSpacer:{height:"49px"}})(Gt));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(202);var Yt=new u.a,Kt={currentUser:Object(a.a)({},function(){var e=localStorage.getItem("user-info");return e?JSON.parse(e):{__typename:"User",id:null,firstName:null,lastName:null,email:null}}())},Zt=Object(f.a)({cache:Yt,defaults:Kt,resolvers:{Mutation:{updateUserInfo:function(e,t,n){var a={user:{__typename:"User",id:t.id,firstName:t.firstName,lastName:t.lastName,email:t.email}};return n.cache.writeData({data:a}),null}}}}),Xt=localStorage.getItem("auth-token"),en=new s.a({uri:"http://api.mykidtrip.com",credentials:"same-origin",headers:{authorization:Xt?"Bearer ".concat(Xt):""}}),tn=new c.a({link:d.a.from([Object(m.a)((function(e){var t=e.graphQLErrors,n=e.networkError;t&&t.map((function(e){var t=e.message,n=e.locations,a=e.path;return console.log("[GraphQL error]: Message: ".concat(t,", Location: ").concat(n,", Path: ").concat(a))})),n&&console.log("[Network error]: ".concat(n))})),Zt,en]),cache:new u.a,resolvers:{}});l.a.render(o.a.createElement(H.a,null,o.a.createElement(p.b,{client:tn},o.a.createElement(Jt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[163,1,2]]]);
//# sourceMappingURL=main.7182bc64.chunk.js.map